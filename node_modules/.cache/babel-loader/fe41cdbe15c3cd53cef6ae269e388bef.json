{"ast":null,"code":"var _dec,\n    _class,\n    _temp,\n    _jsxFileName = \"C:\\\\Users\\\\carli\\\\OneDrive\\\\Escritorio\\\\Dev\\\\astrid\\\\InteriorDesing\\\\src\\\\Components\\\\AppContenido.jsx\";\n\nimport \"../App.css\";\nimport React, { Component } from \"react\";\nimport $ from \"jquery\";\nimport axios from \"axios\";\nimport { BP3D } from \"../engine/blueprint3d.js\";\nimport { INIT_STRUCTURE, NEW_STRUCTURE } from \"../Structures.js\";\nimport { BASE_URL, ASSETS } from \"../Constants.js\";\nimport TopBarButton from \"./TopBar/TopBarButton.jsx\";\nimport Button from \"react-bootstrap/Button\";\nimport { FaSearchMinus, FaSearchPlus, FaHome, FaArrowUp, FaArrowDown, FaArrowLeft, FaArrowRight, FaChevronRight, FaArrowsAlt, FaPencilAlt, FaTrashAlt, FaPencilRuler, FaDraftingCompass, FaPlus, FaRedo, FaCamera, FaPenFancy, FaCube, FaInfoCircle } from \"react-icons/fa\";\nimport { Tabs, Tab, OverlayTrigger, Tooltip } from \"react-bootstrap\";\nimport CardListSofa from \"./AddItems/CardListSofa.jsx\";\nimport CardListChair from \"./AddItems/CardListChair.jsx\";\nimport CardListRug from \"./AddItems/CardListRug.jsx\";\nimport CardListMisc from \"./AddItems/CardListMisc.jsx\";\nimport CardListArch from \"./AddItems/CardListArch.jsx\";\nimport CardListLight from \"./AddItems/CardListLight.jsx\";\nimport FloorTextureList from \"./TextureList/FloorTextureList.jsx\";\nimport WallTextureList from \"./TextureList/WallTextureList.jsx\";\nimport ContextMenu from \"./ContextMenu.jsx\";\nimport SaveButton from \"./SaveLoadModal/SaveFile/SaveButton.jsx\";\nimport LoadButton from \"./SaveLoadModal/LoadFile/LoadButton.jsx\";\nimport SaveModal from \"./SaveLoadModal/SaveFile/SaveModal.jsx\";\nimport LoadModal from \"./SaveLoadModal/LoadFile/LoadModal.jsx\";\nimport jsPDF from \"jspdf\";\nimport { inject, observer } from \"mobx-react\";\nimport ScreenCaptureButton from \"./ScreenCaptureButton\";\nlet AppContenido = (_dec = inject(\"store\"), _dec(_class = observer(_class = (_temp = class AppContenido extends Component {\n  constructor(props) {\n    super(props);\n\n    this.fetchAuthenticatedUser = async () => {\n      try {\n        // Obtener el token de localStorage\n        const token = localStorage.getItem(\"authToken\"); // Verificar que el token esté presente\n\n        if (!token) {\n          throw new Error(\"No se encontró token de autenticación\");\n        } // Hacer la solicitud al backend para obtener los datos del usuario\n\n\n        const response = await axios.get(\"/api/usuario/autenticado\", {\n          headers: {\n            Authorization: `Bearer ${token}` // Enviar el token en el encabezado de autorización\n\n          }\n        }); // Actualizar el estado con los datos del usuario\n\n        const {\n          name,\n          email\n        } = response.data;\n        this.setState({\n          userName: name,\n          userEmail: email\n        });\n      } catch (error) {\n        console.error(\"Error al obtener los datos del usuario:\", error);\n      }\n    };\n\n    this.generateReport = () => {\n      // Información General del Reporte\n      // Filtrar texturas de pisos y paredes antes de generar el reporte\n      const uniqueFloorTextures = [...new Set(this.props.store.obtenerFloorTextures)];\n      const uniqueWallTextures = [...new Set(this.props.store.obtenerWallTextures)];\n      const softwareName = \"Office Interior Design\";\n      const userName = this.props.store.obtenerNombreDeUsuario || \"[Nombre no disponible]\";\n      const userEmail = this.props.store.obtenerCorreoUsuario || \"[Correo no disponible]\";\n      const reportDate = new Date().toLocaleDateString(); // Cantidad de Objetos en el Canvas\n\n      const objectCounts = {\n        sillas: 0,\n        mesas: 0,\n        escritorios: 0,\n        sofás: 0,\n        lámparas: 0,\n        estantes: 0,\n        plantas: 0,\n        alfombras: 0,\n        elementosArquitectónicos: 0,\n        mobiliarioDeOficina: 0,\n        otros: 0\n      }; // Acceso a los tipos de pisos y paredes (ahora soportando múltiples texturas)\n\n      const floorTextures = this.props.store.obtenerFloorTextures.length > 0 ? this.props.store.obtenerFloorTextures : [\"[Tipo de piso no disponible]\"];\n      const wallTextures = this.props.store.obtenerWallTextures.length > 0 ? this.props.store.obtenerWallTextures : [\"[Tipo de pared no disponible]\"]; // Mapear tipos numéricos a categorías\n\n      const typeMapping = {\n        1: \"sillas\",\n        2: \"mesas\",\n        3: \"escritorios\",\n        4: \"sofás\",\n        5: \"lámparas\",\n        6: \"estantes\",\n        7: \"plantas\",\n        8: \"alfombras\",\n        10: \"elementosArquitectónicos\",\n        11: \"mobiliarioDeOficina\"\n      }; // Mapear nombres específicos de objetos a categorías\n\n      const nameMapping = {\n        \"Arm Chair\": \"sillas\",\n        Ottoman: \"sillas\",\n        \"White Chair\": \"sillas\",\n        \"Red Chair\": \"sillas\",\n        Bench: \"sillas\",\n        \"Cube Armchair\": \"sillas\",\n        Stool: \"sillas\",\n        \"Wooden Stool\": \"sillas\",\n        \"Brown Rug\": \"alfombras\",\n        \"Blue Rug\": \"alfombras\",\n        Laptop: \"mobiliarioDeOficina\",\n        \"TV Unit\": \"mobiliarioDeOficina\",\n        \"Beige Leather Panel\": \"mobiliarioDeOficina\",\n        \"TV Unit B\": \"mobiliarioDeOficina\",\n        \"Molding Wall Panel\": \"mobiliarioDeOficina\",\n        \"Round Mirror\": \"mobiliarioDeOficina\",\n        \"Mirror - Escapade\": \"mobiliarioDeOficina\",\n        Easel: \"mobiliarioDeOficina\",\n        \"Cosmetic Set\": \"mobiliarioDeOficina\",\n        \"Airplane Toy\": \"mobiliarioDeOficina\",\n        \"Rocket Toy\": \"mobiliarioDeOficina\",\n        \"Duck Toy\": \"mobiliarioDeOficina\",\n        \"Elephant Figurine\": \"mobiliarioDeOficina\",\n        Vase: \"mobiliarioDeOficina\",\n        \"Ornamental Horn\": \"mobiliarioDeOficina\",\n        \"Vinta Clock\": \"mobiliarioDeOficina\",\n        Shelves: \"mobiliarioDeOficina\",\n        \"Wall Shelf\": \"mobiliarioDeOficina\",\n        Rack: \"mobiliarioDeOficina\",\n        \"Round Table\": \"mobiliarioDeOficina\",\n        Worktable: \"mobiliarioDeOficina\",\n        \"Drawing Table\": \"mobiliarioDeOficina\",\n        \"Study Table\": \"mobiliarioDeOficina\",\n        Cabinet: \"mobiliarioDeOficina\",\n        \"Sliding Wardrobe\": \"mobiliarioDeOficina\",\n        \"Cupboard and Rack\": \"mobiliarioDeOficina\",\n        \"Cupboard and Shelf\": \"mobiliarioDeOficina\",\n        Wardrobe: \"mobiliarioDeOficina\",\n        Curtain: \"mobiliarioDeOficina\",\n        \"Hanging Light\": \"lámparas\",\n        \"Table Lamp\": \"lámparas\",\n        \"Luminaires Black Light\": \"lámparas\",\n        \"Luminaires White Light\": \"lámparas\",\n        \"Sconce Light Black\": \"lámparas\",\n        Window: \"elementosArquitectónicos\",\n        Doorway: \"elementosArquitectónicos\",\n        \"Sliding Window\": \"elementosArquitectónicos\",\n        \"Black Window\": \"elementosArquitectónicos\",\n        \"Closed Door (Inverted)\": \"elementosArquitectónicos\",\n        Stairs: \"elementosArquitectónicos\",\n        \"Stairs (Inverted)\": \"elementosArquitectónicos\",\n        \"Stair Case\": \"elementosArquitectónicos\",\n        \"Window - Rectangular\": \"elementosArquitectónicos\",\n        \"Window - Rectangular (Black)\": \"elementosArquitectónicos\",\n        \"Balcony Railing\": \"elementosArquitectónicos\",\n        \"Balcony Railing 2\": \"elementosArquitectónicos\"\n      };\n      const unmappedTypes = new Set(); // Recorre cada objeto y cuenta según el tipo o el nombre\n\n      this.state.blueprint3d.model.scene.items.forEach(item => {\n        const itemType = item.metadata.itemType;\n        const itemName = item.metadata.itemName;\n\n        if (nameMapping[itemName]) {\n          const category = nameMapping[itemName];\n          objectCounts[category]++;\n        } else if (typeMapping[itemType]) {\n          const category = typeMapping[itemType];\n          objectCounts[category]++;\n        } else {\n          objectCounts.otros++;\n          unmappedTypes.add(itemType);\n        }\n      });\n      const totalObjects = Object.values(objectCounts).reduce((a, b) => a + b, 0);\n      const materialsUsed = totalObjects + 2; // La suma de todos los objetos + 2 para incluir piso y pared\n\n      const wallCount = this.state.blueprint3d.model.floorplan.walls.length;\n      const dimensions = this.state.blueprint3d.model.floorplan.getDimensions ? JSON.stringify(this.state.blueprint3d.model.floorplan.getDimensions()) : \"[Dimensiones no disponibles]\"; // Crear el PDF\n\n      const doc = new jsPDF(); // Añadir contenido al PDF\n\n      doc.setFontSize(12);\n      doc.text(`Office Interior Design - Reporte`, 10, 10);\n      doc.text(`Generado el: ${reportDate}`, 10, 20);\n      doc.text(`Nombre de Usuario: ${userName}`, 10, 30);\n      doc.text(`Correo Electrónico: ${userEmail}`, 10, 40); // Resumen de Objetos en el Canvas\n\n      doc.text(\"Resumen de Objetos en el Canvas:\", 10, 50);\n      let yPosition = 60;\n      Object.keys(objectCounts).forEach(key => {\n        doc.text(`- ${key}: ${objectCounts[key]}`, 10, yPosition);\n        yPosition += 10;\n      }); // Dimensiones del Área\n\n      doc.text(`Dimensiones del Área: ${dimensions}`, 10, yPosition + 10);\n      doc.text(\"Tipos de Pisos Utilizados:\", 10, yPosition);\n      yPosition += 10;\n      uniqueFloorTextures.forEach(floorTexture => {\n        doc.text(`- ${floorTexture}`, 10, yPosition);\n        yPosition += 10;\n      }); // Tipos de Paredes Utilizadas\n\n      doc.text(\"Tipos de Paredes Utilizadas:\", 10, yPosition);\n      yPosition += 10;\n      uniqueWallTextures.forEach(wallTexture => {\n        doc.text(`- ${wallTexture}`, 10, yPosition);\n        yPosition += 10;\n      }); // Materiales utilizados y otros detalles\n\n      yPosition += 10;\n      doc.text(`Total de Materiales Utilizados: ${materialsUsed}`, 10, yPosition); // Descargar el PDF\n\n      doc.save(\"reporte_diseño.pdf\");\n    };\n\n    this.sideMenu = function (blueprint3d, floorplanControls, modalEffects) {\n      // var modalEffects = modalEffectsArg;\n      var ACTIVE_CLASS = \"active\";\n      var tabs = {\n        FLOORPLAN: $(\"#floorplan_tab\"),\n        SHOP: $(\"#items_tab\"),\n        DESIGN: $(\"#design_tab\")\n      }; // var scope = this;\n\n      var stateChangeCallbacks = $.Callbacks();\n      var states = {\n        DEFAULT: {\n          div: $(\"#viewer\"),\n          tab: tabs.DESIGN,\n          name: \"Design\"\n        },\n        FLOORPLAN: {\n          div: $(\"#floorplanner\"),\n          tab: tabs.FLOORPLAN,\n          name: \"Floorplan\"\n        },\n        SHOP: {\n          div: $(\"#add-items\"),\n          tab: tabs.SHOP,\n          name: \"Shop\"\n        }\n      }; // sidebar state\n\n      var currentState = states.FLOORPLAN;\n\n      function init() {\n        for (var tab in tabs) {\n          var elem = tabs[tab];\n          elem.click(tabClicked(elem));\n        }\n\n        $(\"#update-floorplan\").click(floorplanUpdate);\n\n        function reset() {\n          $(\"texture-context-container\").hide();\n          $(\"#wallTextures\").hide();\n          $(\"#floorTexturesDiv\").hide();\n        }\n\n        stateChangeCallbacks.add(reset);\n        initLeftMenu();\n        blueprint3d.three.updateWindowSize();\n        handleWindowResize();\n        initItems();\n        setCurrentState(states.DEFAULT, true);\n      }\n\n      function floorplanUpdate() {\n        setCurrentState(states.DEFAULT);\n      }\n\n      function tabClicked(tab) {\n        return function () {\n          // Stop three from spinning\n          initItems();\n          blueprint3d.three.stopSpin(); // Selected a new tab\n\n          for (var key in states) {\n            var state = states[key];\n\n            if (state.tab === tab) {\n              setCurrentState(state);\n              break;\n            }\n          }\n        };\n      }\n\n      var getCurrentState = () => {\n        if (this.state.currentStateName === \"Design\") {\n          return states.DEFAULT;\n        }\n\n        if (this.state.currentStateName === \"Floorplan\") {\n          return states.FLOORPLAN;\n        }\n\n        if (this.state.currentStateName === \"Shop\") {\n          return states.SHOP;\n        }\n\n        return null;\n      };\n\n      var updateState = newState => {\n        this.setState({\n          currentStateName: newState.name\n        });\n      };\n\n      function setCurrentState(newState, firstTime) {\n        currentState = getCurrentState();\n        firstTime = firstTime || false;\n\n        if (!firstTime && currentState.name === newState.name) {\n          return;\n        } // show the right tab as active\n\n\n        if (currentState.name !== newState.name) {\n          if (currentState.tab != null) {\n            currentState.tab.removeClass(ACTIVE_CLASS);\n          }\n\n          if (newState.tab != null) {\n            newState.tab.addClass(ACTIVE_CLASS);\n          }\n        }\n\n        if (currentState.name === newState.name) {\n          newState.tab.addClass(ACTIVE_CLASS);\n        } // set item unselected\n\n\n        if (firstTime || newState.name !== \"Design\") {\n          blueprint3d.three.getController().setSelectedObject(null);\n        } // show and hide the right divs\n\n\n        currentState.div.hide();\n        newState.div.show(); // custom actions\n\n        if (newState === states.FLOORPLAN) {\n          floorplanControls.handleWindowResize();\n          floorplanControls.updateFloorplanView();\n        }\n\n        if (currentState === states.FLOORPLAN) {\n          blueprint3d.model.floorplan.update();\n        }\n\n        if (newState === states.DEFAULT) {\n          blueprint3d.three.updateWindowSize();\n        } // set new state\n\n\n        handleWindowResize();\n        currentState = newState;\n        updateState(newState);\n        stateChangeCallbacks.fire(newState); //change mobx state-active-tab\n      }\n\n      function initLeftMenu() {\n        $(window).resize(handleWindowResize);\n        handleWindowResize();\n      }\n\n      function handleWindowResize() {// $(\".sidebar\").height(window.innerHeight);\n        // $(\"#add-items\").height(window.innerHeight);\n      }\n\n      var initItems = () => {\n        this.initItems(blueprint3d, setCurrentState);\n      };\n\n      init();\n      this.setState({\n        blueprint3d: blueprint3d\n      });\n    };\n\n    this.state = {\n      showWallTextureList: false,\n      showFloorTextureList: false,\n      key: \"chair\",\n      blueprint3d: {},\n      añadirManejadorDeClick: false,\n      currentStateName: \"Design\",\n      blob: \"\",\n      userName: \"\",\n      userEmail: \"\"\n    };\n    this.engine = this.engine.bind(this);\n    this.setDesignState = this.setDesignState.bind(this);\n    this.cameraButtons = this.cameraButtons.bind(this);\n    this.contextMenu = this.contextMenu.bind(this);\n    this.modalEffects = this.modalEffects.bind(this);\n    this.sideMenu = this.sideMenu.bind(this);\n    this.textureSelector = this.textureSelector.bind(this);\n    this.initItems = this.initItems.bind(this);\n    this.saveFile = this.saveFile.bind(this);\n    this.loadFile = this.loadFile.bind(this);\n    this.handleLogoutShow = this.handleLogoutShow.bind(this);\n    this.handleModalRepeat = this.handleModalRepeat.bind(this);\n    this.handleModalInfo = this.handleModalInfo.bind(this);\n    this.generateReport = this.generateReport.bind(this);\n    this.closeWallTextureList = this.closeWallTextureList.bind(this);\n    this.showFloorTextureList = this.showFloorTextureList.bind(this);\n    this.closeFloorTextureList = this.closeFloorTextureList.bind(this);\n  }\n\n  async componentDidMount() {\n    await this.fetchAuthenticatedUser();\n  } // Métodos para mostrar y cerrar listas de texturas\n\n\n  showFloorTextureList() {\n    console.log(\"Mostrando FloorTextureList\");\n    this.setState({\n      showFloorTextureList: true\n    });\n  }\n\n  closeFloorTextureList() {\n    console.log(\"No Mostrando FloorTextureList\");\n    this.setState({\n      showFloorTextureList: false\n    });\n  }\n\n  showWallTextureList() {\n    this.setState({\n      showWallTextureList: true\n    });\n  }\n\n  closeWallTextureList() {\n    this.setState({\n      showWallTextureList: false\n    });\n  }\n\n  saveFile() {\n    if (this.state.blueprint3d.model !== undefined) {\n      var data = this.state.blueprint3d.model.exportSerialized(); // var a = window.document.createElement(\"a\");\n\n      var blob = new Blob([data], {\n        type: \"text\"\n      });\n      this.setState({\n        blob: blob\n      }); // a.href = window.URL.createObjectURL(blob);\n      // a.download = \"design.blueprint3d\";\n      // document.body.appendChild(a);\n      // a.click();\n      // document.body.removeChild(a);\n    }\n  }\n\n  async loadFile(uri) {\n    try {\n      // console.log(\"uri: \" + uri);\n      if (uri !== null && uri !== \"\") {\n        let res = await axios.get(BASE_URL + ASSETS + uri);\n        this.state.blueprint3d.model.loadSerialized(JSON.stringify(res.data));\n      } else {\n        console.log(\"uri is null\");\n      }\n    } catch (e) {\n      console.log(e);\n    }\n  }\n  /*\r\n   * Camera Buttons\r\n   */\n\n\n  cameraButtons(blueprint3d) {\n    var orbitControls = blueprint3d.three.controls;\n    var three = blueprint3d.three;\n    var panSpeed = 30;\n    var directions = {\n      UP: 1,\n      DOWN: 2,\n      LEFT: 3,\n      RIGHT: 4\n    };\n\n    function init() {\n      // Camera controls\n      $(\"#zoom-in\").click(zoomIn);\n      $(\"#zoom-in\").on(\"touchend\", zoomIn);\n      $(\"#zoom-out\").click(zoomOut);\n      $(\"#zoom-out\").on(\"touchend\", zoomOut);\n      $(\"#zoom-in\").dblclick(preventDefault);\n      $(\"#zoom-out\").dblclick(preventDefault);\n      $(\"#reset-view\").click(three.centerCamera);\n      $(\"#reset-view\").on(\"touchend\", three.centerCamera);\n      $(\"#move-left\").click(function () {\n        pan(directions.LEFT);\n      });\n      $(\"#move-left\").on(\"touchend\", function () {\n        pan(directions.LEFT);\n      });\n      $(\"#move-right\").click(function () {\n        pan(directions.RIGHT);\n      });\n      $(\"#move-right\").on(\"touchend\", function () {\n        pan(directions.RIGHT);\n      });\n      $(\"#move-up\").click(function () {\n        pan(directions.UP);\n      });\n      $(\"#move-up\").on(\"touchend\", function () {\n        pan(directions.UP);\n      });\n      $(\"#move-down\").click(function () {\n        pan(directions.DOWN);\n      });\n      $(\"#move-down\").on(\"touchend\", function () {\n        pan(directions.DOWN);\n      });\n      $(\"#move-left\").dblclick(preventDefault);\n      $(\"#move-right\").dblclick(preventDefault);\n      $(\"#move-up\").dblclick(preventDefault);\n      $(\"#move-down\").dblclick(preventDefault);\n    }\n\n    function preventDefault(e) {\n      e.preventDefault();\n      e.stopPropagation();\n    }\n\n    function pan(direction) {\n      switch (direction) {\n        case directions.UP:\n          orbitControls.panXY(0, panSpeed);\n          break;\n\n        case directions.DOWN:\n          orbitControls.panXY(0, -panSpeed);\n          break;\n\n        case directions.LEFT:\n          orbitControls.panXY(panSpeed, 0);\n          break;\n\n        case directions.RIGHT:\n          orbitControls.panXY(-panSpeed, 0);\n          break;\n\n        default:\n          break;\n      }\n    }\n\n    function zoomIn(e) {\n      e.preventDefault();\n      orbitControls.dollyIn(1.1);\n      orbitControls.update();\n    }\n\n    function zoomOut(e) {\n      // eslint-disable-next-line no-unused-expressions\n      e.preventDefault;\n      orbitControls.dollyOut(1.1);\n      orbitControls.update();\n    }\n\n    init();\n    this.setState({\n      blueprint3d: blueprint3d\n    });\n  }\n  /*\r\n   * Context menu for selected item\r\n   */\n\n\n  contextMenu(blueprint3d) {\n    // var scope = this;\n    var selectedItem;\n    var three = blueprint3d.three;\n\n    function init() {\n      $(\"#context-menu-delete\").click(function (event) {\n        selectedItem.remove();\n      });\n      $(\"#context-menu-delete\").on(\"touchend\", function (event) {\n        selectedItem.remove();\n      });\n      three.itemSelectedCallbacks.add(itemSelected);\n      three.itemUnselectedCallbacks.add(itemUnselected);\n      initResize();\n      $(\"#fixed\").click(function () {\n        var checked = $(this).prop(\"checked\");\n        selectedItem.setFixed(checked);\n      });\n    }\n\n    function cmToIn(cm) {\n      return cm / 2.54;\n    }\n\n    function inToCm(inches) {\n      return inches * 2.54;\n    }\n\n    function itemSelected(item) {\n      selectedItem = item;\n      $(\"#context-menu-name\").text(item.metadata.itemName);\n      $(\"#item-width\").val(cmToIn(selectedItem.getWidth()).toFixed(0));\n      $(\"#item-height\").val(cmToIn(selectedItem.getHeight()).toFixed(0));\n      $(\"#item-depth\").val(cmToIn(selectedItem.getDepth()).toFixed(0));\n      $(\"#item-elevation\").val(cmToIn(selectedItem.getElevation()).toFixed(0));\n      $(\"texture-context-container\").show();\n      $(\"#context-menu\").show();\n\n      if (selectedItem.isElevationAdjustable()) {\n        $(\"#item-elevation-div\").show();\n      } else {\n        $(\"#item-elevation-div\").hide();\n      }\n\n      $(\"#fixed\").prop(\"checked\", item.fixed);\n    }\n\n    function resize() {\n      selectedItem.resize(inToCm($(\"#item-height\").val()), inToCm($(\"#item-width\").val()), inToCm($(\"#item-depth\").val()));\n    }\n\n    function elevate() {\n      selectedItem.elevate(inToCm($(\"#item-elevation\").val()));\n    }\n\n    function initResize() {\n      $(\"#item-height\").change(resize);\n      $(\"#item-width\").change(resize);\n      $(\"#item-depth\").change(resize);\n      $(\"#item-elevation\").change(elevate);\n    }\n\n    function itemUnselected() {\n      selectedItem = null;\n      $(\"texture-context-container\").hide();\n      $(\"#context-menu\").hide();\n    }\n\n    init();\n    this.setState({\n      blueprint3d: blueprint3d\n    });\n  }\n  /*\r\n   * Loading modal for items\r\n   */\n\n\n  modalEffects(blueprint3d) {\n    // var scope = this;\n    var itemsLoading = 0;\n\n    this.setActiveItem = function (active) {\n      // eslint-disable-next-line no-undef\n      itemSelected = active;\n      update();\n    };\n\n    function update() {\n      if (itemsLoading > 0) {\n        $(\"#loading-modal\").show();\n      } else {\n        $(\"#loading-modal\").hide();\n      }\n    }\n\n    function init() {\n      blueprint3d.model.scene.itemLoadingCallbacks.add(function () {\n        itemsLoading += 1;\n        update();\n      });\n      blueprint3d.model.scene.itemLoadedCallbacks.add(function () {\n        itemsLoading -= 1;\n        update();\n      });\n      update();\n    }\n\n    init();\n    this.setState({\n      blueprint3d: blueprint3d\n    });\n  }\n  /*\r\n   * Side menu\r\n   */\n\n\n  initItems(blueprint3d, setCurrentState) {\n    $(\"#add-items\").find(\".add-item\").off(\"click\");\n    $(\"#add-items\").find(\".add-item\").click(function (e) {\n      var modelUrl = $(this).attr(\"model-url\");\n      var itemType = parseInt($(this).attr(\"model-type\"));\n      var metadata = {\n        itemName: $(this).attr(\"model-name\"),\n        resizable: true,\n        modelUrl: modelUrl,\n        itemType: itemType\n      };\n      blueprint3d.model.scene.addItem(itemType, modelUrl, metadata);\n      setCurrentState({\n        div: $(\"#viewer\"),\n        tab: $(\"#design_tab\"),\n        name: \"Design\"\n      }, false);\n    });\n  }\n  /*\r\n   * Change floor and wall textures\r\n   */\n\n\n  textureSelector(blueprint3d, sideMenu) {\n    // var scope = this;\n    var three = blueprint3d.three; // var isAdmin = isAdmin;\n\n    var currentTarget = null;\n\n    function initTextureSelectors() {\n      $(\".texture-select-thumbnail\").off(\"click\");\n      $(\".texture-select-thumbnail\").click(function (e) {\n        var textureUrl = $(this).attr(\"texture-url\");\n        var textureStretch = $(this).attr(\"texture-stretch\") === \"true\";\n        var textureScale = parseInt($(this).attr(\"texture-scale\"));\n        currentTarget.setTexture(textureUrl, textureStretch, textureScale);\n        e.preventDefault();\n      });\n    }\n\n    function init() {\n      three.wallClicked.add(wallClicked);\n      three.wallClicked.add(initTextureSelectors);\n      three.floorClicked.add(floorClicked);\n      three.wallClicked.add(initTextureSelectors);\n      three.itemSelectedCallbacks.add(reset);\n      three.wallClicked.add(initTextureSelectors);\n      three.nothingClicked.add(reset);\n      three.wallClicked.add(initTextureSelectors); // sideMenu.stateChangeCallbacks.add(reset);\n\n      three.wallClicked.add(initTextureSelectors);\n      initTextureSelectors();\n      three.wallClicked.add(wallClicked);\n    }\n\n    function wallClicked(halfEdge) {\n      if (currentTarget !== undefined && currentTarget !== null) {\n        currentTarget.removeOutline();\n      }\n\n      currentTarget = halfEdge;\n      currentTarget.drawOutline();\n      $(\"#floorTexturesDiv\").hide();\n      $(\"texture-context-container\").show();\n      $(\"#wallTextures\").show();\n      initTextureSelectors();\n      this.setState({\n        showWallTextureList: true\n      });\n    } // eslint-disable-next-line no-func-assign\n\n\n    wallClicked = wallClicked.bind(this);\n\n    function floorClicked(room) {\n      if (currentTarget !== undefined && currentTarget !== null) {\n        currentTarget.removeOutline();\n      }\n\n      currentTarget = room;\n      currentTarget.drawOutline();\n      this.showFloorTextureList();\n      $(\"#wallTextures\").hide();\n      $(\"texture-context-container\").show();\n      $(\"#floorTexturesDiv\").show();\n      initTextureSelectors();\n    } // eslint-disable-next-line no-func-assign\n\n\n    floorClicked = floorClicked.bind(this);\n\n    function reset() {// if (currentTarget !== undefined && currentTarget !== null) {\n      //   currentTarget.removeOutline();\n      // }\n      // $(\"texture-context-container\").hide();\n      // $(\"#wallTextures\").hide();\n      // $(\"#floorTexturesDiv\").hide();\n      // initTextureSelectors();\n    }\n\n    init();\n  }\n\n  handleLogoutShow(e) {\n    e.preventDefault();\n    this.props.store.cambiarModuloLogout(true);\n  }\n\n  handleModalRepeat(e) {\n    e.preventDefault();\n    this.props.store.cambiarModuloRepetir(true);\n  }\n\n  handleModalInfo(e) {\n    e.preventDefault();\n    this.props.store.cambiarModuloInformacion(true);\n  }\n\n  async engine(viewKey) {\n    /*\r\n     * Floorplanner controls\r\n     */\n    var ViewerFloorplanner = function (blueprint3d) {\n      var canvasWrapper = \"#floorplanner\"; // buttons\n\n      var move = \"#move\";\n      var remove = \"#delete\";\n      var draw = \"#draw\";\n      var activeStlye = \"btn-primary disabled\";\n      this.floorplanner = blueprint3d.floorplanner;\n      var scope = this;\n\n      function init() {\n        $(window).resize(scope.handleWindowResize);\n        scope.handleWindowResize(); // mode buttons\n        // scope.floorplanner.modeResetCallbacks.add(function (mode) {\n        //   // $(draw).removeClass(activeStlye);\n        //   // $(remove).removeClass(activeStlye);\n        //   // $(move).removeClass(activeStlye);\n        //   // if (mode === BP3D.Floorplanner.floorplannerModes.MOVE) {\n        //   //   $(move).addClass(activeStlye);\n        //   // } else if (mode === BP3D.Floorplanner.floorplannerModes.DRAW) {\n        //   //   $(draw).addClass(activeStlye);\n        //   // } else if (mode === BP3D.Floorplanner.floorplannerModes.DELETE) {\n        //   //   $(remove).addClass(activeStlye);\n        //   // }\n        //   // if (mode === BP3D.Floorplanner.floorplannerModes.DRAW) {\n        //   //   $(\"#draw-walls-hint\").show();\n        //   //   scope.handleWindowResize();\n        //   // } else {\n        //   //   $(\"#draw-walls-hint\").hide();\n        //   // }\n        // });\n\n        $(move).click(function () {\n          scope.floorplanner.setMode(BP3D.Floorplanner.floorplannerModes.MOVE);\n        }); // $(move).on(\"touchend\", function () {\n        //   scope.floorplanner.setMode(BP3D.Floorplanner.floorplannerModes.MOVE);\n        // });\n\n        $(draw).click(function () {\n          scope.floorplanner.setMode(BP3D.Floorplanner.floorplannerModes.DRAW);\n        });\n        $(draw).on(\"touchend\", function () {\n          scope.floorplanner.setMode(BP3D.Floorplanner.floorplannerModes.DRAW);\n        });\n        $(remove).click(function () {\n          scope.floorplanner.setMode(BP3D.Floorplanner.floorplannerModes.DELETE);\n        });\n        $(remove).on(\"touchend\", function () {\n          scope.floorplanner.setMode(BP3D.Floorplanner.floorplannerModes.DELETE);\n        });\n      }\n\n      this.updateFloorplanView = function () {\n        scope.floorplanner.reset();\n      };\n\n      this.handleWindowResize = function () {\n        $(canvasWrapper).height(window.innerHeight - $(canvasWrapper).offset().top);\n        scope.floorplanner.resizeView();\n      };\n\n      init();\n    };\n\n    var mainControls = function (blueprint3d) {\n      function newDesign() {\n        blueprint3d.model.loadSerialized(NEW_STRUCTURE);\n      } // var loadDesign = async (event) => {\n      //   let name = $(\"#loadFile\").attr('name');\n      //   let file1 = await axios.get(\n      //     \"http://localhost:8001/assets/\" + name\n      //   );\n      //   // var file1 = event.target.files[0];\n      //   var reader = new FileReader();\n      //   reader.onload = function () {\n      //     var data = reader.result;\n      //     blueprint3d.model.loadSerialized(data);\n      //   };\n      //   reader.readAsText(file1);\n      //   $(\"#loadFile\").replaceWith($(\"#loadFile\").val(\"\").clone(true));\n      //   try {\n      //     let uri = $(\"#loadFile\").attr(\"uri\");\n      //     console.log(\"uri: \" + uri);\n      //     if (uri !== \"\") {\n      //       let res = await axios.get(\"http://localhost:8001/assets/\" + uri);\n      //       blueprint3d.model.loadSerialized(JSON.stringify(res.data));\n      //     }\n      //   } catch (e) {\n      //     console.log(e);\n      //   }\n      // };\n      // function saveDesign() {\n      //   var data = blueprint3d.model.exportSerialized();\n      //   var a = window.document.createElement(\"a\");\n      //   var blob = new Blob([data], {\n      //     type: \"text\",\n      //   });\n      //   // setBlob(blob);\n      //   a.href = window.URL.createObjectURL(blob);\n      //   a.download = \"design\";\n      //   document.body.appendChild(a);\n      //   a.click();\n      //   document.body.removeChild(a);\n      // }\n      // function setBlob(blob) {\n      //   setNewBlob(blob);\n      // }\n\n\n      function init() {\n        $(\"#new\").click(newDesign); // $(\"#new\").on(\"touchend\", newDesign);\n        // $(\"#loadFile\").click(loadDesign);\n        // $(\"#loadFileLabel\").on(\"touchend\", function () {\n        //   $(\"#loadFile\").trigger(\"click\");\n        // });\n        // $(\"#saveFile\").click(saveDesign);\n        // $(\"#saveFile\").on(\"touchend\", saveDesign);\n      }\n\n      init();\n    };\n    /*\r\n     * Initialize!\r\n     */\n\n\n    var modalEffects = this.modalEffects(this.state.blueprint3d);\n    var viewerFloorplanner = new ViewerFloorplanner(this.state.blueprint3d); // eslint-disable-next-line no-unused-vars\n\n    var contextMenu = this.contextMenu(this.state.blueprint3d);\n    var sideMenu = this.sideMenu(this.state.blueprint3d, viewerFloorplanner, modalEffects); // eslint-disable-next-line no-unused-vars\n\n    var textureSelector = this.textureSelector(this.state.blueprint3d, sideMenu); // eslint-disable-next-line no-unused-vars\n\n    var cameraButtons = this.cameraButtons(this.state.blueprint3d);\n    mainControls(this.state.blueprint3d); // This serialization format needs work\n    // Load a simple rectangle room\n\n    if (viewKey === \"\") {\n      this.state.blueprint3d.model.loadSerialized(INIT_STRUCTURE);\n    } else {\n      try {\n        let res = await axios.get(BASE_URL + ASSETS + viewKey); // let file1 = new Blob(res)\n        // var blueprint3d = this.state.blueprint3d;\n        // var reader = new FileReader();\n        //   reader.onload = function () {\n        //     var data = reader.result;\n        //     blueprint3d.model.loadSerialized(data);\n        //   };\n        //   reader.readAsText(file1);\n\n        this.state.blueprint3d.model.loadSerialized(JSON.stringify(res.data));\n      } catch (e) {\n        console.log(e);\n        this.state.blueprint3d.model.loadSerialized(INIT_STRUCTURE);\n      }\n    }\n  } // eslint-disable-next-line no-dupe-class-members\n\n\n  componentDidMount() {\n    const opts = {\n      floorplannerElement: \"floorplanner-canvas\",\n      threeElement: \"#viewer\",\n      threeCanvasElement: \"three-canvas\",\n      textureDir: \"rooms/textures/\",\n      widget: false\n    };\n    this.setState({\n      blueprint3d: new BP3D.Blueprint3d(opts)\n    }, () => {\n      if (this.props.viewKey) {\n        this.engine(this.props.viewKey);\n      } else {\n        this.engine(\"\");\n      }\n    });\n  }\n\n  setDesignState(newState, firstTime) {\n    firstTime = firstTime || false;\n    var ACTIVE_CLASS = \"active\";\n    $(\"#items_tab\").removeClass(ACTIVE_CLASS);\n    $(\"#design_tab\").addClass(ACTIVE_CLASS); // show and hide the right divs\n\n    $(\"#add-items\").hide();\n    $(\"#viewer\").show();\n    this.state.blueprint3d.three.updateWindowSize(); // set new state\n\n    function handleWindowResize() {\n      $(\".sidebar\").height(window.innerHeight);\n      $(\"#add-items\").height(window.innerHeight);\n    }\n\n    handleWindowResize();\n\n    function reset() {\n      $(\"texture-context-container\").hide();\n      $(\"#wallTextures\").hide();\n      $(\"#floorTexturesDiv\").hide();\n    }\n\n    reset();\n    this.setState({\n      currentStateName: \"Design\"\n    }); //change mobx state-active-tab\n  }\n\n  componentDidUpdate(prevProps, prevState, snapShot) {\n    if (this.props.añadirManejadorDeClick) {\n      // this.setState({ añadirManejadorDeClick: true });\n      this.props.store.cambiarManejadorDeClick(false);\n      this.initItems(this.state.blueprint3d, this.setDesignState);\n    }\n\n    if (this.props.añadirManejadorDeClick === false && prevProps.añadirManejadorDeClick) {\n      this.setState({\n        añadirManejadorDeClick: false\n      });\n    }\n  }\n\n  render() {\n    console.log(\"Renderizando AppContenido. showFloorTextureList:\", this.state.showFloorTextureList);\n    const {\n      store\n    } = this.props;\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: \"horizontal-container\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 1140,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      id: \"texture-context-container\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 1143,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      id: \"context-menu\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 1145,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(ContextMenu, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 1146,\n        columnNumber: 13\n      }\n    })), this.state.showFloorTextureList && /*#__PURE__*/React.createElement(\"div\", {\n      id: \"floorTexturesDiv\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 1150,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(FloorTextureList, {\n      onClose: this.closeFloorTextureList,\n      usuarioHaIniciadoSesion: this.props.store.obtenerInicioDeSesion,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 1151,\n        columnNumber: 15\n      }\n    })), this.state.showWallTextureList && /*#__PURE__*/React.createElement(\"div\", {\n      id: \"wallTextures\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 1160,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(WallTextureList, {\n      onClose: this.closeWallTextureList,\n      usuarioHaIniciadoSesion: store.obtenerInicioDeSesion,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 1161,\n        columnNumber: 15\n      }\n    }))), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"right-container\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 1171,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      id: \"viewer\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 1173,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      id: \"loading-modal\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 1236,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"h1\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 1237,\n        columnNumber: 15\n      }\n    }, \"Loading...\"))), /*#__PURE__*/React.createElement(\"div\", {\n      id: \"floorplanner\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 1242,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(\"canvas\", {\n      id: \"floorplanner-canvas\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 1243,\n        columnNumber: 13\n      }\n    }), /*#__PURE__*/React.createElement(\"div\", {\n      id: \"floorplanner-controls\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 1244,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(Button, {\n      variant: \"info\",\n      size: \"sm\",\n      className: \"icon-text-button\",\n      id: \"move\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 1245,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(\"span\", {\n      className: \"icon-centre\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 1251,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(FaArrowsAlt, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 1252,\n        columnNumber: 19\n      }\n    })), /*#__PURE__*/React.createElement(\"span\", {\n      className: \"text-centre\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 1254,\n        columnNumber: 17\n      }\n    }, \"Mover Muros\")), /*#__PURE__*/React.createElement(Button, {\n      variant: \"info\",\n      size: \"sm\",\n      className: \"icon-text-button\",\n      id: \"draw\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 1256,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(\"span\", {\n      className: \"icon-centre\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 1262,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(FaPencilAlt, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 1263,\n        columnNumber: 19\n      }\n    })), /*#__PURE__*/React.createElement(\"span\", {\n      className: \"text-centre\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 1265,\n        columnNumber: 17\n      }\n    }, \"Dibujar Muros\")), /*#__PURE__*/React.createElement(Button, {\n      variant: \"info\",\n      size: \"sm\",\n      className: \"icon-text-button\",\n      id: \"delete\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 1267,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(\"span\", {\n      className: \"icon-centre\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 1273,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(FaTrashAlt, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 1274,\n        columnNumber: 19\n      }\n    })), /*#__PURE__*/React.createElement(\"span\", {\n      className: \"text-centre\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 1276,\n        columnNumber: 17\n      }\n    }, \"Borrar Muros\")), /*#__PURE__*/React.createElement(Button, {\n      variant: \"info\",\n      size: \"sm\",\n      className: \"icon-text-button\",\n      id: \"update-floorplan\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 1279,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(\"span\", {\n      className: \"text-centre\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 1285,\n        columnNumber: 17\n      }\n    }, \"Listo\"), /*#__PURE__*/React.createElement(\"span\", {\n      className: \"icon-centre\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 1286,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(FaChevronRight, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 1287,\n        columnNumber: 19\n      }\n    })))), /*#__PURE__*/React.createElement(\"div\", {\n      id: \"draw-walls-hint\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 1291,\n        columnNumber: 13\n      }\n    }, \"Press the \\\"Esc\\\" key to stop drawing walls\")), /*#__PURE__*/React.createElement(\"div\", {\n      id: \"add-items\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 1296,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(Tabs, {\n      variant: \"pills\",\n      style: {\n        display: \"flex\",\n        flexDirection: \"column\",\n        width: \"100px\",\n        position: \"absolute\",\n        right: \"100px\",\n        top: \"100px\"\n      },\n      id: \"controlled-tab-example\",\n      activeKey: this.state.key,\n      onSelect: k => {\n        this.setState({\n          key: k\n        });\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 1297,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(Tab, {\n      eventKey: \"chair\",\n      title: \"Sillas\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 1316,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(CardListChair, {\n      usuarioHaIniciadoSesion: store.obtenerInicioDeSesion,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 1317,\n        columnNumber: 17\n      }\n    })), /*#__PURE__*/React.createElement(Tab, {\n      eventKey: \"rug\",\n      title: \"Alfombras\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 1321,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(CardListRug, {\n      usuarioHaIniciadoSesion: store.obtenerInicioDeSesion,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 1322,\n        columnNumber: 17\n      }\n    })), /*#__PURE__*/React.createElement(Tab, {\n      eventKey: \"misc\",\n      title: \"Oficina personal y corporativa\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 1326,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(CardListMisc, {\n      usuarioHaIniciadoSesion: store.obtenerInicioDeSesion,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 1327,\n        columnNumber: 17\n      }\n    })), /*#__PURE__*/React.createElement(Tab, {\n      eventKey: \"light\",\n      title: \"Luces\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 1331,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(CardListLight, {\n      usuarioHaIniciadoSesion: store.obtenerInicioDeSesion,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 1332,\n        columnNumber: 17\n      }\n    })), /*#__PURE__*/React.createElement(Tab, {\n      eventKey: \"arch\",\n      title: \"Architectural\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 1336,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(CardListArch, {\n      usuarioHaIniciadoSesion: store.obtenerInicioDeSesion,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 1337,\n        columnNumber: 17\n      }\n    })))), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"menu\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 1343,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      display: \"flex\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 1344,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"ul\", {\n      className: \"nav nav-sidebar\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 1345,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(\"li\", {\n      id: \"design_tab\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 1346,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(OverlayTrigger, {\n      placement: \"right\",\n      overlay: /*#__PURE__*/React.createElement(Tooltip, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 1349,\n          columnNumber: 30\n        }\n      }, \"Dise\\xF1ar\"),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 1347,\n        columnNumber: 19\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"icons\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 1351,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"iconWrapper\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 1352,\n        columnNumber: 23\n      }\n    }, /*#__PURE__*/React.createElement(FaCube, {\n      size: \"25px\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 1353,\n        columnNumber: 25\n      }\n    }))))), /*#__PURE__*/React.createElement(\"li\", {\n      id: \"floorplan_tab\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 1358,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(OverlayTrigger, {\n      placement: \"right\",\n      overlay: /*#__PURE__*/React.createElement(Tooltip, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 1361,\n          columnNumber: 30\n        }\n      }, \"Editar piso\"),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 1359,\n        columnNumber: 19\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"icons\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 1363,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"iconWrapper\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 1364,\n        columnNumber: 23\n      }\n    }, /*#__PURE__*/React.createElement(FaPenFancy, {\n      size: \"25px\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 1365,\n        columnNumber: 25\n      }\n    }))))), /*#__PURE__*/React.createElement(\"li\", {\n      id: \"items_tab\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 1370,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(OverlayTrigger, {\n      placement: \"right\",\n      overlay: /*#__PURE__*/React.createElement(Tooltip, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 1373,\n          columnNumber: 30\n        }\n      }, \"A\\xF1adir objeto\"),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 1371,\n        columnNumber: 19\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"icons\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 1375,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"iconWrapper\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 1376,\n        columnNumber: 23\n      }\n    }, /*#__PURE__*/React.createElement(FaPlus, {\n      size: \"25px\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 1377,\n        columnNumber: 25\n      }\n    }))))), /*#__PURE__*/React.createElement(\"li\", {\n      id: \"items_tab\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 1382,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"img\", {\n      src: \"./logo.png\",\n      className: \"top-bar-logo\",\n      alt: \"\",\n      style: {\n        width: \"100px\",\n        height: \"100px\",\n        margin: \"-5px 10px 0 10px\"\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 1383,\n        columnNumber: 19\n      }\n    })), /*#__PURE__*/React.createElement(\"li\", {\n      style: {\n        display: \"none\"\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 1394,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(OverlayTrigger, {\n      placement: \"right\",\n      overlay: /*#__PURE__*/React.createElement(Tooltip, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 1397,\n          columnNumber: 30\n        }\n      }, \"Repetir plano\"),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 1395,\n        columnNumber: 19\n      }\n    }, /*#__PURE__*/React.createElement(Button, {\n      className: \"repeatButton\",\n      onClick: this.handleModalRepeat,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 1399,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"icons\",\n      id: \"new\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 1403,\n        columnNumber: 23\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"iconWrapper\",\n      style: {\n        margin: 0,\n        padding: 0\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 1404,\n        columnNumber: 25\n      }\n    }, /*#__PURE__*/React.createElement(FaRedo, {\n      size: \"25px\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 1408,\n        columnNumber: 27\n      }\n    })))))), /*#__PURE__*/React.createElement(\"li\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 1414,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(OverlayTrigger, {\n      placement: \"right\",\n      overlay: /*#__PURE__*/React.createElement(Tooltip, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 1417,\n          columnNumber: 30\n        }\n      }, \"Repetir plano\"),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 1415,\n        columnNumber: 19\n      }\n    }, /*#__PURE__*/React.createElement(Button, {\n      className: \"repeatButton\",\n      onClick: this.handleModalRepeat,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 1419,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"icons\",\n      id: \"new\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 1423,\n        columnNumber: 23\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"iconWrapper\",\n      style: {\n        margin: 0,\n        padding: 0\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 1424,\n        columnNumber: 25\n      }\n    }, /*#__PURE__*/React.createElement(FaRedo, {\n      size: \"25px\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 1428,\n        columnNumber: 27\n      }\n    })))))), /*#__PURE__*/React.createElement(\"li\", {\n      id: \"design_tab\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 1434,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(ScreenCaptureButton, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 1435,\n        columnNumber: 19\n      }\n    })), /*#__PURE__*/React.createElement(\"li\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 1437,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(OverlayTrigger, {\n      placement: \"right\",\n      overlay: /*#__PURE__*/React.createElement(Tooltip, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 1440,\n          columnNumber: 30\n        }\n      }, \"Informaci\\xF3n\"),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 1438,\n        columnNumber: 19\n      }\n    }, /*#__PURE__*/React.createElement(Button, {\n      className: \"repeatButton\",\n      onClick: this.handleModalInfo,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 1442,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"icons\",\n      id: \"new\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 1446,\n        columnNumber: 23\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"iconWrapper\",\n      style: {\n        margin: 0,\n        padding: 0\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 1447,\n        columnNumber: 25\n      }\n    }, /*#__PURE__*/React.createElement(FaInfoCircle, {\n      size: \"25px\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 1451,\n        columnNumber: 27\n      }\n    })))))), /*#__PURE__*/React.createElement(\"li\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 1457,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(Button, {\n      variant: \"outline-dark\",\n      className: \"top-bar-login-button\",\n      style: {\n        position: \"absolute\",\n        top: \"10px\",\n        right: 150\n      },\n      onClick: this.generateReport,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 1458,\n        columnNumber: 19\n      }\n    }, \"Generar Reporte\")), /*#__PURE__*/React.createElement(\"li\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 1467,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(Button, {\n      variant: \"outline-dark\",\n      className: \"top-bar-login-button\",\n      style: {\n        position: \"absolute\",\n        top: \"10px\",\n        right: 0\n      },\n      onClick: this.handleLogoutShow,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 1468,\n        columnNumber: 19\n      }\n    }, \"Salir\")))))));\n  }\n\n}, _temp)) || _class) || _class);\nexport default AppContenido;","map":{"version":3,"sources":["C:/Users/carli/OneDrive/Escritorio/Dev/astrid/InteriorDesing/src/Components/AppContenido.jsx"],"names":["React","Component","$","axios","BP3D","INIT_STRUCTURE","NEW_STRUCTURE","BASE_URL","ASSETS","TopBarButton","Button","FaSearchMinus","FaSearchPlus","FaHome","FaArrowUp","FaArrowDown","FaArrowLeft","FaArrowRight","FaChevronRight","FaArrowsAlt","FaPencilAlt","FaTrashAlt","FaPencilRuler","FaDraftingCompass","FaPlus","FaRedo","FaCamera","FaPenFancy","FaCube","FaInfoCircle","Tabs","Tab","OverlayTrigger","Tooltip","CardListSofa","CardListChair","CardListRug","CardListMisc","CardListArch","CardListLight","FloorTextureList","WallTextureList","ContextMenu","SaveButton","LoadButton","SaveModal","LoadModal","jsPDF","inject","observer","ScreenCaptureButton","AppContenido","constructor","props","fetchAuthenticatedUser","token","localStorage","getItem","Error","response","get","headers","Authorization","name","email","data","setState","userName","userEmail","error","console","generateReport","uniqueFloorTextures","Set","store","obtenerFloorTextures","uniqueWallTextures","obtenerWallTextures","softwareName","obtenerNombreDeUsuario","obtenerCorreoUsuario","reportDate","Date","toLocaleDateString","objectCounts","sillas","mesas","escritorios","sofás","lámparas","estantes","plantas","alfombras","elementosArquitectónicos","mobiliarioDeOficina","otros","floorTextures","length","wallTextures","typeMapping","nameMapping","Ottoman","Bench","Stool","Laptop","Easel","Vase","Shelves","Rack","Worktable","Cabinet","Wardrobe","Curtain","Window","Doorway","Stairs","unmappedTypes","state","blueprint3d","model","scene","items","forEach","item","itemType","metadata","itemName","category","add","totalObjects","Object","values","reduce","a","b","materialsUsed","wallCount","floorplan","walls","dimensions","getDimensions","JSON","stringify","doc","setFontSize","text","yPosition","keys","key","floorTexture","wallTexture","save","sideMenu","floorplanControls","modalEffects","ACTIVE_CLASS","tabs","FLOORPLAN","SHOP","DESIGN","stateChangeCallbacks","Callbacks","states","DEFAULT","div","tab","currentState","init","elem","click","tabClicked","floorplanUpdate","reset","hide","initLeftMenu","three","updateWindowSize","handleWindowResize","initItems","setCurrentState","stopSpin","getCurrentState","currentStateName","updateState","newState","firstTime","removeClass","addClass","getController","setSelectedObject","show","updateFloorplanView","update","fire","window","resize","showWallTextureList","showFloorTextureList","añadirManejadorDeClick","blob","engine","bind","setDesignState","cameraButtons","contextMenu","textureSelector","saveFile","loadFile","handleLogoutShow","handleModalRepeat","handleModalInfo","closeWallTextureList","closeFloorTextureList","componentDidMount","log","undefined","exportSerialized","Blob","type","uri","res","loadSerialized","e","orbitControls","controls","panSpeed","directions","UP","DOWN","LEFT","RIGHT","zoomIn","on","zoomOut","dblclick","preventDefault","centerCamera","pan","stopPropagation","direction","panXY","dollyIn","dollyOut","selectedItem","event","remove","itemSelectedCallbacks","itemSelected","itemUnselectedCallbacks","itemUnselected","initResize","checked","prop","setFixed","cmToIn","cm","inToCm","inches","val","getWidth","toFixed","getHeight","getDepth","getElevation","isElevationAdjustable","fixed","elevate","change","itemsLoading","setActiveItem","active","itemLoadingCallbacks","itemLoadedCallbacks","find","off","modelUrl","attr","parseInt","resizable","addItem","currentTarget","initTextureSelectors","textureUrl","textureStretch","textureScale","setTexture","wallClicked","floorClicked","nothingClicked","halfEdge","removeOutline","drawOutline","room","cambiarModuloLogout","cambiarModuloRepetir","cambiarModuloInformacion","viewKey","ViewerFloorplanner","canvasWrapper","move","draw","activeStlye","floorplanner","scope","setMode","Floorplanner","floorplannerModes","MOVE","DRAW","DELETE","height","innerHeight","offset","top","resizeView","mainControls","newDesign","viewerFloorplanner","opts","floorplannerElement","threeElement","threeCanvasElement","textureDir","widget","Blueprint3d","componentDidUpdate","prevProps","prevState","snapShot","cambiarManejadorDeClick","render","obtenerInicioDeSesion","display","flexDirection","width","position","right","k","margin","padding"],"mappings":"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","sourcesContent":["import \"../App.css\";\r\nimport React, { Component } from \"react\";\r\nimport $ from \"jquery\";\r\nimport axios from \"axios\";\r\nimport { BP3D } from \"../engine/blueprint3d.js\";\r\nimport { INIT_STRUCTURE, NEW_STRUCTURE } from \"../Structures.js\";\r\nimport { BASE_URL, ASSETS } from \"../Constants.js\";\r\nimport TopBarButton from \"./TopBar/TopBarButton.jsx\";\r\nimport Button from \"react-bootstrap/Button\";\r\nimport {\r\n  FaSearchMinus,\r\n  FaSearchPlus,\r\n  FaHome,\r\n  FaArrowUp,\r\n  FaArrowDown,\r\n  FaArrowLeft,\r\n  FaArrowRight,\r\n  FaChevronRight,\r\n  FaArrowsAlt,\r\n  FaPencilAlt,\r\n  FaTrashAlt,\r\n  FaPencilRuler,\r\n  FaDraftingCompass,\r\n  FaPlus,\r\n  FaRedo,\r\n  FaCamera,\r\n  FaPenFancy,\r\n  FaCube,\r\n  FaInfoCircle,\r\n} from \"react-icons/fa\";\r\nimport { Tabs, Tab, OverlayTrigger, Tooltip } from \"react-bootstrap\";\r\nimport CardListSofa from \"./AddItems/CardListSofa.jsx\";\r\nimport CardListChair from \"./AddItems/CardListChair.jsx\";\r\nimport CardListRug from \"./AddItems/CardListRug.jsx\";\r\nimport CardListMisc from \"./AddItems/CardListMisc.jsx\";\r\nimport CardListArch from \"./AddItems/CardListArch.jsx\";\r\nimport CardListLight from \"./AddItems/CardListLight.jsx\";\r\nimport FloorTextureList from \"./TextureList/FloorTextureList.jsx\";\r\nimport WallTextureList from \"./TextureList/WallTextureList.jsx\";\r\nimport ContextMenu from \"./ContextMenu.jsx\";\r\nimport SaveButton from \"./SaveLoadModal/SaveFile/SaveButton.jsx\";\r\nimport LoadButton from \"./SaveLoadModal/LoadFile/LoadButton.jsx\";\r\nimport SaveModal from \"./SaveLoadModal/SaveFile/SaveModal.jsx\";\r\nimport LoadModal from \"./SaveLoadModal/LoadFile/LoadModal.jsx\";\r\nimport jsPDF from \"jspdf\";\r\n\r\nimport { inject, observer } from \"mobx-react\";\r\nimport ScreenCaptureButton from \"./ScreenCaptureButton\";\r\n\r\n@inject(\"store\")\r\n@observer\r\nclass AppContenido extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      showWallTextureList: false,\r\n      showFloorTextureList: false,\r\n      key: \"chair\",\r\n      blueprint3d: {},\r\n      añadirManejadorDeClick: false,\r\n      currentStateName: \"Design\",\r\n      blob: \"\",\r\n      userName: \"\",\r\n      userEmail: \"\",\r\n    };\r\n    this.engine = this.engine.bind(this);\r\n    this.setDesignState = this.setDesignState.bind(this);\r\n    this.cameraButtons = this.cameraButtons.bind(this);\r\n    this.contextMenu = this.contextMenu.bind(this);\r\n    this.modalEffects = this.modalEffects.bind(this);\r\n    this.sideMenu = this.sideMenu.bind(this);\r\n    this.textureSelector = this.textureSelector.bind(this);\r\n    this.initItems = this.initItems.bind(this);\r\n    this.saveFile = this.saveFile.bind(this);\r\n    this.loadFile = this.loadFile.bind(this);\r\n    this.handleLogoutShow = this.handleLogoutShow.bind(this);\r\n    this.handleModalRepeat = this.handleModalRepeat.bind(this);\r\n    this.handleModalInfo = this.handleModalInfo.bind(this);\r\n    this.generateReport = this.generateReport.bind(this);\r\n    this.closeWallTextureList = this.closeWallTextureList.bind(this);\r\n    this.showFloorTextureList = this.showFloorTextureList.bind(this);\r\n    this.closeFloorTextureList = this.closeFloorTextureList.bind(this);\r\n  }\r\n  async componentDidMount() {\r\n    await this.fetchAuthenticatedUser();\r\n  }\r\n\r\n  // Métodos para mostrar y cerrar listas de texturas\r\n  showFloorTextureList() {\r\n    console.log(\"Mostrando FloorTextureList\");\r\n    this.setState({ showFloorTextureList: true });\r\n  }\r\n\r\n  closeFloorTextureList() {\r\n    console.log(\"No Mostrando FloorTextureList\");\r\n    this.setState({ showFloorTextureList: false });\r\n  }\r\n\r\n  showWallTextureList() {\r\n    this.setState({ showWallTextureList: true });\r\n  }\r\n\r\n  closeWallTextureList() {\r\n    this.setState({ showWallTextureList: false });\r\n  }\r\n\r\n  fetchAuthenticatedUser = async () => {\r\n    try {\r\n      // Obtener el token de localStorage\r\n      const token = localStorage.getItem(\"authToken\");\r\n\r\n      // Verificar que el token esté presente\r\n      if (!token) {\r\n        throw new Error(\"No se encontró token de autenticación\");\r\n      }\r\n\r\n      // Hacer la solicitud al backend para obtener los datos del usuario\r\n      const response = await axios.get(\"/api/usuario/autenticado\", {\r\n        headers: {\r\n          Authorization: `Bearer ${token}`, // Enviar el token en el encabezado de autorización\r\n        },\r\n      });\r\n\r\n      // Actualizar el estado con los datos del usuario\r\n      const { name, email } = response.data;\r\n      this.setState({\r\n        userName: name,\r\n        userEmail: email,\r\n      });\r\n    } catch (error) {\r\n      console.error(\"Error al obtener los datos del usuario:\", error);\r\n    }\r\n  };\r\n  saveFile() {\r\n    if (this.state.blueprint3d.model !== undefined) {\r\n      var data = this.state.blueprint3d.model.exportSerialized();\r\n      // var a = window.document.createElement(\"a\");\r\n      var blob = new Blob([data], {\r\n        type: \"text\",\r\n      });\r\n      this.setState({ blob: blob });\r\n      // a.href = window.URL.createObjectURL(blob);\r\n      // a.download = \"design.blueprint3d\";\r\n      // document.body.appendChild(a);\r\n      // a.click();\r\n      // document.body.removeChild(a);\r\n    }\r\n  }\r\n\r\n  async loadFile(uri) {\r\n    try {\r\n      // console.log(\"uri: \" + uri);\r\n      if (uri !== null && uri !== \"\") {\r\n        let res = await axios.get(BASE_URL + ASSETS + uri);\r\n        this.state.blueprint3d.model.loadSerialized(JSON.stringify(res.data));\r\n      } else {\r\n        console.log(\"uri is null\");\r\n      }\r\n    } catch (e) {\r\n      console.log(e);\r\n    }\r\n  }\r\n\r\n  /*\r\n   * Camera Buttons\r\n   */\r\n\r\n  generateReport = () => {\r\n    // Información General del Reporte\r\n    // Filtrar texturas de pisos y paredes antes de generar el reporte\r\n    const uniqueFloorTextures = [\r\n      ...new Set(this.props.store.obtenerFloorTextures),\r\n    ];\r\n    const uniqueWallTextures = [\r\n      ...new Set(this.props.store.obtenerWallTextures),\r\n    ];\r\n\r\n    const softwareName = \"Office Interior Design\";\r\n    const userName =\r\n      this.props.store.obtenerNombreDeUsuario || \"[Nombre no disponible]\";\r\n    const userEmail =\r\n      this.props.store.obtenerCorreoUsuario || \"[Correo no disponible]\";\r\n    const reportDate = new Date().toLocaleDateString();\r\n\r\n    // Cantidad de Objetos en el Canvas\r\n    const objectCounts = {\r\n      sillas: 0,\r\n      mesas: 0,\r\n      escritorios: 0,\r\n      sofás: 0,\r\n      lámparas: 0,\r\n      estantes: 0,\r\n      plantas: 0,\r\n      alfombras: 0,\r\n      elementosArquitectónicos: 0,\r\n      mobiliarioDeOficina: 0,\r\n      otros: 0,\r\n    };\r\n\r\n    // Acceso a los tipos de pisos y paredes (ahora soportando múltiples texturas)\r\n    const floorTextures =\r\n      this.props.store.obtenerFloorTextures.length > 0\r\n        ? this.props.store.obtenerFloorTextures\r\n        : [\"[Tipo de piso no disponible]\"];\r\n\r\n    const wallTextures =\r\n      this.props.store.obtenerWallTextures.length > 0\r\n        ? this.props.store.obtenerWallTextures\r\n        : [\"[Tipo de pared no disponible]\"];\r\n\r\n    // Mapear tipos numéricos a categorías\r\n    const typeMapping = {\r\n      1: \"sillas\",\r\n      2: \"mesas\",\r\n      3: \"escritorios\",\r\n      4: \"sofás\",\r\n      5: \"lámparas\",\r\n      6: \"estantes\",\r\n      7: \"plantas\",\r\n      8: \"alfombras\",\r\n      10: \"elementosArquitectónicos\",\r\n      11: \"mobiliarioDeOficina\",\r\n    };\r\n\r\n    // Mapear nombres específicos de objetos a categorías\r\n    const nameMapping = {\r\n      \"Arm Chair\": \"sillas\",\r\n      Ottoman: \"sillas\",\r\n      \"White Chair\": \"sillas\",\r\n      \"Red Chair\": \"sillas\",\r\n      Bench: \"sillas\",\r\n      \"Cube Armchair\": \"sillas\",\r\n      Stool: \"sillas\",\r\n      \"Wooden Stool\": \"sillas\",\r\n      \"Brown Rug\": \"alfombras\",\r\n      \"Blue Rug\": \"alfombras\",\r\n      Laptop: \"mobiliarioDeOficina\",\r\n      \"TV Unit\": \"mobiliarioDeOficina\",\r\n      \"Beige Leather Panel\": \"mobiliarioDeOficina\",\r\n      \"TV Unit B\": \"mobiliarioDeOficina\",\r\n      \"Molding Wall Panel\": \"mobiliarioDeOficina\",\r\n      \"Round Mirror\": \"mobiliarioDeOficina\",\r\n      \"Mirror - Escapade\": \"mobiliarioDeOficina\",\r\n      Easel: \"mobiliarioDeOficina\",\r\n      \"Cosmetic Set\": \"mobiliarioDeOficina\",\r\n      \"Airplane Toy\": \"mobiliarioDeOficina\",\r\n      \"Rocket Toy\": \"mobiliarioDeOficina\",\r\n      \"Duck Toy\": \"mobiliarioDeOficina\",\r\n      \"Elephant Figurine\": \"mobiliarioDeOficina\",\r\n      Vase: \"mobiliarioDeOficina\",\r\n      \"Ornamental Horn\": \"mobiliarioDeOficina\",\r\n      \"Vinta Clock\": \"mobiliarioDeOficina\",\r\n      Shelves: \"mobiliarioDeOficina\",\r\n      \"Wall Shelf\": \"mobiliarioDeOficina\",\r\n      Rack: \"mobiliarioDeOficina\",\r\n      \"Round Table\": \"mobiliarioDeOficina\",\r\n      Worktable: \"mobiliarioDeOficina\",\r\n      \"Drawing Table\": \"mobiliarioDeOficina\",\r\n      \"Study Table\": \"mobiliarioDeOficina\",\r\n      Cabinet: \"mobiliarioDeOficina\",\r\n      \"Sliding Wardrobe\": \"mobiliarioDeOficina\",\r\n      \"Cupboard and Rack\": \"mobiliarioDeOficina\",\r\n      \"Cupboard and Shelf\": \"mobiliarioDeOficina\",\r\n      Wardrobe: \"mobiliarioDeOficina\",\r\n      Curtain: \"mobiliarioDeOficina\",\r\n      \"Hanging Light\": \"lámparas\",\r\n      \"Table Lamp\": \"lámparas\",\r\n      \"Luminaires Black Light\": \"lámparas\",\r\n      \"Luminaires White Light\": \"lámparas\",\r\n      \"Sconce Light Black\": \"lámparas\",\r\n      Window: \"elementosArquitectónicos\",\r\n      Doorway: \"elementosArquitectónicos\",\r\n      \"Sliding Window\": \"elementosArquitectónicos\",\r\n      \"Black Window\": \"elementosArquitectónicos\",\r\n      \"Closed Door (Inverted)\": \"elementosArquitectónicos\",\r\n      Stairs: \"elementosArquitectónicos\",\r\n      \"Stairs (Inverted)\": \"elementosArquitectónicos\",\r\n      \"Stair Case\": \"elementosArquitectónicos\",\r\n      \"Window - Rectangular\": \"elementosArquitectónicos\",\r\n      \"Window - Rectangular (Black)\": \"elementosArquitectónicos\",\r\n      \"Balcony Railing\": \"elementosArquitectónicos\",\r\n      \"Balcony Railing 2\": \"elementosArquitectónicos\",\r\n    };\r\n\r\n    const unmappedTypes = new Set();\r\n\r\n    // Recorre cada objeto y cuenta según el tipo o el nombre\r\n    this.state.blueprint3d.model.scene.items.forEach((item) => {\r\n      const itemType = item.metadata.itemType;\r\n      const itemName = item.metadata.itemName;\r\n\r\n      if (nameMapping[itemName]) {\r\n        const category = nameMapping[itemName];\r\n        objectCounts[category]++;\r\n      } else if (typeMapping[itemType]) {\r\n        const category = typeMapping[itemType];\r\n        objectCounts[category]++;\r\n      } else {\r\n        objectCounts.otros++;\r\n        unmappedTypes.add(itemType);\r\n      }\r\n    });\r\n\r\n    const totalObjects = Object.values(objectCounts).reduce((a, b) => a + b, 0);\r\n    const materialsUsed = totalObjects + 2; // La suma de todos los objetos + 2 para incluir piso y pared\r\n\r\n    const wallCount = this.state.blueprint3d.model.floorplan.walls.length;\r\n    const dimensions = this.state.blueprint3d.model.floorplan.getDimensions\r\n      ? JSON.stringify(this.state.blueprint3d.model.floorplan.getDimensions())\r\n      : \"[Dimensiones no disponibles]\";\r\n\r\n    // Crear el PDF\r\n    const doc = new jsPDF();\r\n\r\n    // Añadir contenido al PDF\r\n    doc.setFontSize(12);\r\n    doc.text(`Office Interior Design - Reporte`, 10, 10);\r\n    doc.text(`Generado el: ${reportDate}`, 10, 20);\r\n    doc.text(`Nombre de Usuario: ${userName}`, 10, 30);\r\n    doc.text(`Correo Electrónico: ${userEmail}`, 10, 40);\r\n\r\n    // Resumen de Objetos en el Canvas\r\n    doc.text(\"Resumen de Objetos en el Canvas:\", 10, 50);\r\n    let yPosition = 60;\r\n    Object.keys(objectCounts).forEach((key) => {\r\n      doc.text(`- ${key}: ${objectCounts[key]}`, 10, yPosition);\r\n      yPosition += 10;\r\n    });\r\n\r\n    // Dimensiones del Área\r\n    doc.text(`Dimensiones del Área: ${dimensions}`, 10, yPosition + 10);\r\n\r\n    doc.text(\"Tipos de Pisos Utilizados:\", 10, yPosition);\r\n    yPosition += 10;\r\n    uniqueFloorTextures.forEach((floorTexture) => {\r\n      doc.text(`- ${floorTexture}`, 10, yPosition);\r\n      yPosition += 10;\r\n    });\r\n\r\n    // Tipos de Paredes Utilizadas\r\n    doc.text(\"Tipos de Paredes Utilizadas:\", 10, yPosition);\r\n    yPosition += 10;\r\n    uniqueWallTextures.forEach((wallTexture) => {\r\n      doc.text(`- ${wallTexture}`, 10, yPosition);\r\n      yPosition += 10;\r\n    });\r\n\r\n    // Materiales utilizados y otros detalles\r\n    yPosition += 10;\r\n    doc.text(`Total de Materiales Utilizados: ${materialsUsed}`, 10, yPosition);\r\n\r\n    // Descargar el PDF\r\n    doc.save(\"reporte_diseño.pdf\");\r\n  };\r\n\r\n  cameraButtons(blueprint3d) {\r\n    var orbitControls = blueprint3d.three.controls;\r\n    var three = blueprint3d.three;\r\n\r\n    var panSpeed = 30;\r\n    var directions = {\r\n      UP: 1,\r\n      DOWN: 2,\r\n      LEFT: 3,\r\n      RIGHT: 4,\r\n    };\r\n\r\n    function init() {\r\n      // Camera controls\r\n      $(\"#zoom-in\").click(zoomIn);\r\n      $(\"#zoom-in\").on(\"touchend\", zoomIn);\r\n      $(\"#zoom-out\").click(zoomOut);\r\n      $(\"#zoom-out\").on(\"touchend\", zoomOut);\r\n\r\n      $(\"#zoom-in\").dblclick(preventDefault);\r\n      $(\"#zoom-out\").dblclick(preventDefault);\r\n\r\n      $(\"#reset-view\").click(three.centerCamera);\r\n      $(\"#reset-view\").on(\"touchend\", three.centerCamera);\r\n\r\n      $(\"#move-left\").click(function () {\r\n        pan(directions.LEFT);\r\n      });\r\n      $(\"#move-left\").on(\"touchend\", function () {\r\n        pan(directions.LEFT);\r\n      });\r\n\r\n      $(\"#move-right\").click(function () {\r\n        pan(directions.RIGHT);\r\n      });\r\n      $(\"#move-right\").on(\"touchend\", function () {\r\n        pan(directions.RIGHT);\r\n      });\r\n\r\n      $(\"#move-up\").click(function () {\r\n        pan(directions.UP);\r\n      });\r\n      $(\"#move-up\").on(\"touchend\", function () {\r\n        pan(directions.UP);\r\n      });\r\n\r\n      $(\"#move-down\").click(function () {\r\n        pan(directions.DOWN);\r\n      });\r\n      $(\"#move-down\").on(\"touchend\", function () {\r\n        pan(directions.DOWN);\r\n      });\r\n\r\n      $(\"#move-left\").dblclick(preventDefault);\r\n      $(\"#move-right\").dblclick(preventDefault);\r\n      $(\"#move-up\").dblclick(preventDefault);\r\n      $(\"#move-down\").dblclick(preventDefault);\r\n    }\r\n\r\n    function preventDefault(e) {\r\n      e.preventDefault();\r\n      e.stopPropagation();\r\n    }\r\n\r\n    function pan(direction) {\r\n      switch (direction) {\r\n        case directions.UP:\r\n          orbitControls.panXY(0, panSpeed);\r\n          break;\r\n        case directions.DOWN:\r\n          orbitControls.panXY(0, -panSpeed);\r\n          break;\r\n        case directions.LEFT:\r\n          orbitControls.panXY(panSpeed, 0);\r\n          break;\r\n        case directions.RIGHT:\r\n          orbitControls.panXY(-panSpeed, 0);\r\n          break;\r\n        default:\r\n          break;\r\n      }\r\n    }\r\n\r\n    function zoomIn(e) {\r\n      e.preventDefault();\r\n      orbitControls.dollyIn(1.1);\r\n      orbitControls.update();\r\n    }\r\n\r\n    function zoomOut(e) {\r\n      // eslint-disable-next-line no-unused-expressions\r\n      e.preventDefault;\r\n      orbitControls.dollyOut(1.1);\r\n      orbitControls.update();\r\n    }\r\n\r\n    init();\r\n    this.setState({ blueprint3d: blueprint3d });\r\n  }\r\n\r\n  /*\r\n   * Context menu for selected item\r\n   */\r\n  contextMenu(blueprint3d) {\r\n    // var scope = this;\r\n    var selectedItem;\r\n    var three = blueprint3d.three;\r\n\r\n    function init() {\r\n      $(\"#context-menu-delete\").click(function (event) {\r\n        selectedItem.remove();\r\n      });\r\n      $(\"#context-menu-delete\").on(\"touchend\", function (event) {\r\n        selectedItem.remove();\r\n      });\r\n\r\n      three.itemSelectedCallbacks.add(itemSelected);\r\n      three.itemUnselectedCallbacks.add(itemUnselected);\r\n\r\n      initResize();\r\n\r\n      $(\"#fixed\").click(function () {\r\n        var checked = $(this).prop(\"checked\");\r\n        selectedItem.setFixed(checked);\r\n      });\r\n    }\r\n\r\n    function cmToIn(cm) {\r\n      return cm / 2.54;\r\n    }\r\n\r\n    function inToCm(inches) {\r\n      return inches * 2.54;\r\n    }\r\n\r\n    function itemSelected(item) {\r\n      selectedItem = item;\r\n\r\n      $(\"#context-menu-name\").text(item.metadata.itemName);\r\n\r\n      $(\"#item-width\").val(cmToIn(selectedItem.getWidth()).toFixed(0));\r\n      $(\"#item-height\").val(cmToIn(selectedItem.getHeight()).toFixed(0));\r\n      $(\"#item-depth\").val(cmToIn(selectedItem.getDepth()).toFixed(0));\r\n      $(\"#item-elevation\").val(cmToIn(selectedItem.getElevation()).toFixed(0));\r\n\r\n      $(\"texture-context-container\").show();\r\n      $(\"#context-menu\").show();\r\n\r\n      if (selectedItem.isElevationAdjustable()) {\r\n        $(\"#item-elevation-div\").show();\r\n      } else {\r\n        $(\"#item-elevation-div\").hide();\r\n      }\r\n\r\n      $(\"#fixed\").prop(\"checked\", item.fixed);\r\n    }\r\n\r\n    function resize() {\r\n      selectedItem.resize(\r\n        inToCm($(\"#item-height\").val()),\r\n        inToCm($(\"#item-width\").val()),\r\n        inToCm($(\"#item-depth\").val())\r\n      );\r\n    }\r\n\r\n    function elevate() {\r\n      selectedItem.elevate(inToCm($(\"#item-elevation\").val()));\r\n    }\r\n\r\n    function initResize() {\r\n      $(\"#item-height\").change(resize);\r\n      $(\"#item-width\").change(resize);\r\n      $(\"#item-depth\").change(resize);\r\n      $(\"#item-elevation\").change(elevate);\r\n    }\r\n\r\n    function itemUnselected() {\r\n      selectedItem = null;\r\n      $(\"texture-context-container\").hide();\r\n      $(\"#context-menu\").hide();\r\n    }\r\n\r\n    init();\r\n    this.setState({ blueprint3d: blueprint3d });\r\n  }\r\n\r\n  /*\r\n   * Loading modal for items\r\n   */\r\n  modalEffects(blueprint3d) {\r\n    // var scope = this;\r\n    var itemsLoading = 0;\r\n\r\n    this.setActiveItem = function (active) {\r\n      // eslint-disable-next-line no-undef\r\n      itemSelected = active;\r\n      update();\r\n    };\r\n\r\n    function update() {\r\n      if (itemsLoading > 0) {\r\n        $(\"#loading-modal\").show();\r\n      } else {\r\n        $(\"#loading-modal\").hide();\r\n      }\r\n    }\r\n\r\n    function init() {\r\n      blueprint3d.model.scene.itemLoadingCallbacks.add(function () {\r\n        itemsLoading += 1;\r\n        update();\r\n      });\r\n\r\n      blueprint3d.model.scene.itemLoadedCallbacks.add(function () {\r\n        itemsLoading -= 1;\r\n        update();\r\n      });\r\n\r\n      update();\r\n    }\r\n\r\n    init();\r\n    this.setState({ blueprint3d: blueprint3d });\r\n  }\r\n\r\n  /*\r\n   * Side menu\r\n   */\r\n  sideMenu = function (blueprint3d, floorplanControls, modalEffects) {\r\n    // var modalEffects = modalEffectsArg;\r\n\r\n    var ACTIVE_CLASS = \"active\";\r\n\r\n    var tabs = {\r\n      FLOORPLAN: $(\"#floorplan_tab\"),\r\n      SHOP: $(\"#items_tab\"),\r\n      DESIGN: $(\"#design_tab\"),\r\n    };\r\n\r\n    // var scope = this;\r\n    var stateChangeCallbacks = $.Callbacks();\r\n\r\n    var states = {\r\n      DEFAULT: {\r\n        div: $(\"#viewer\"),\r\n        tab: tabs.DESIGN,\r\n        name: \"Design\",\r\n      },\r\n      FLOORPLAN: {\r\n        div: $(\"#floorplanner\"),\r\n        tab: tabs.FLOORPLAN,\r\n        name: \"Floorplan\",\r\n      },\r\n      SHOP: {\r\n        div: $(\"#add-items\"),\r\n        tab: tabs.SHOP,\r\n        name: \"Shop\",\r\n      },\r\n    };\r\n\r\n    // sidebar state\r\n    var currentState = states.FLOORPLAN;\r\n\r\n    function init() {\r\n      for (var tab in tabs) {\r\n        var elem = tabs[tab];\r\n        elem.click(tabClicked(elem));\r\n      }\r\n\r\n      $(\"#update-floorplan\").click(floorplanUpdate);\r\n      function reset() {\r\n        $(\"texture-context-container\").hide();\r\n        $(\"#wallTextures\").hide();\r\n        $(\"#floorTexturesDiv\").hide();\r\n      }\r\n      stateChangeCallbacks.add(reset);\r\n\r\n      initLeftMenu();\r\n\r\n      blueprint3d.three.updateWindowSize();\r\n      handleWindowResize();\r\n\r\n      initItems();\r\n\r\n      setCurrentState(states.DEFAULT, true);\r\n    }\r\n\r\n    function floorplanUpdate() {\r\n      setCurrentState(states.DEFAULT);\r\n    }\r\n\r\n    function tabClicked(tab) {\r\n      return function () {\r\n        // Stop three from spinning\r\n        initItems();\r\n        blueprint3d.three.stopSpin();\r\n\r\n        // Selected a new tab\r\n        for (var key in states) {\r\n          var state = states[key];\r\n          if (state.tab === tab) {\r\n            setCurrentState(state);\r\n            break;\r\n          }\r\n        }\r\n      };\r\n    }\r\n\r\n    var getCurrentState = () => {\r\n      if (this.state.currentStateName === \"Design\") {\r\n        return states.DEFAULT;\r\n      }\r\n      if (this.state.currentStateName === \"Floorplan\") {\r\n        return states.FLOORPLAN;\r\n      }\r\n      if (this.state.currentStateName === \"Shop\") {\r\n        return states.SHOP;\r\n      }\r\n      return null;\r\n    };\r\n\r\n    var updateState = (newState) => {\r\n      this.setState({ currentStateName: newState.name });\r\n    };\r\n\r\n    function setCurrentState(newState, firstTime) {\r\n      currentState = getCurrentState();\r\n      firstTime = firstTime || false;\r\n      if (!firstTime && currentState.name === newState.name) {\r\n        return;\r\n      }\r\n\r\n      // show the right tab as active\r\n      if (currentState.name !== newState.name) {\r\n        if (currentState.tab != null) {\r\n          currentState.tab.removeClass(ACTIVE_CLASS);\r\n        }\r\n        if (newState.tab != null) {\r\n          newState.tab.addClass(ACTIVE_CLASS);\r\n        }\r\n      }\r\n\r\n      if (currentState.name === newState.name) {\r\n        newState.tab.addClass(ACTIVE_CLASS);\r\n      }\r\n\r\n      // set item unselected\r\n      if (firstTime || newState.name !== \"Design\") {\r\n        blueprint3d.three.getController().setSelectedObject(null);\r\n      }\r\n\r\n      // show and hide the right divs\r\n      currentState.div.hide();\r\n      newState.div.show();\r\n\r\n      // custom actions\r\n      if (newState === states.FLOORPLAN) {\r\n        floorplanControls.handleWindowResize();\r\n        floorplanControls.updateFloorplanView();\r\n      }\r\n\r\n      if (currentState === states.FLOORPLAN) {\r\n        blueprint3d.model.floorplan.update();\r\n      }\r\n\r\n      if (newState === states.DEFAULT) {\r\n        blueprint3d.three.updateWindowSize();\r\n      }\r\n\r\n      // set new state\r\n      handleWindowResize();\r\n      currentState = newState;\r\n      updateState(newState);\r\n\r\n      stateChangeCallbacks.fire(newState);\r\n\r\n      //change mobx state-active-tab\r\n    }\r\n\r\n    function initLeftMenu() {\r\n      $(window).resize(handleWindowResize);\r\n      handleWindowResize();\r\n    }\r\n\r\n    function handleWindowResize() {\r\n      // $(\".sidebar\").height(window.innerHeight);\r\n      // $(\"#add-items\").height(window.innerHeight);\r\n    }\r\n\r\n    var initItems = () => {\r\n      this.initItems(blueprint3d, setCurrentState);\r\n    };\r\n\r\n    init();\r\n    this.setState({ blueprint3d: blueprint3d });\r\n  };\r\n\r\n  initItems(blueprint3d, setCurrentState) {\r\n    $(\"#add-items\").find(\".add-item\").off(\"click\");\r\n    $(\"#add-items\")\r\n      .find(\".add-item\")\r\n      .click(function (e) {\r\n        var modelUrl = $(this).attr(\"model-url\");\r\n        var itemType = parseInt($(this).attr(\"model-type\"));\r\n        var metadata = {\r\n          itemName: $(this).attr(\"model-name\"),\r\n          resizable: true,\r\n          modelUrl: modelUrl,\r\n          itemType: itemType,\r\n        };\r\n\r\n        blueprint3d.model.scene.addItem(itemType, modelUrl, metadata);\r\n        setCurrentState(\r\n          {\r\n            div: $(\"#viewer\"),\r\n            tab: $(\"#design_tab\"),\r\n            name: \"Design\",\r\n          },\r\n          false\r\n        );\r\n      });\r\n  }\r\n\r\n  /*\r\n   * Change floor and wall textures\r\n   */\r\n  textureSelector(blueprint3d, sideMenu) {\r\n    // var scope = this;\r\n    var three = blueprint3d.three;\r\n    // var isAdmin = isAdmin;\r\n\r\n    var currentTarget = null;\r\n\r\n    function initTextureSelectors() {\r\n      $(\".texture-select-thumbnail\").off(\"click\");\r\n      $(\".texture-select-thumbnail\").click(function (e) {\r\n        var textureUrl = $(this).attr(\"texture-url\");\r\n        var textureStretch = $(this).attr(\"texture-stretch\") === \"true\";\r\n        var textureScale = parseInt($(this).attr(\"texture-scale\"));\r\n        currentTarget.setTexture(textureUrl, textureStretch, textureScale);\r\n\r\n        e.preventDefault();\r\n      });\r\n    }\r\n\r\n    function init() {\r\n      three.wallClicked.add(wallClicked);\r\n      three.wallClicked.add(initTextureSelectors);\r\n      three.floorClicked.add(floorClicked);\r\n      three.wallClicked.add(initTextureSelectors);\r\n      three.itemSelectedCallbacks.add(reset);\r\n      three.wallClicked.add(initTextureSelectors);\r\n      three.nothingClicked.add(reset);\r\n      three.wallClicked.add(initTextureSelectors);\r\n      // sideMenu.stateChangeCallbacks.add(reset);\r\n      three.wallClicked.add(initTextureSelectors);\r\n      initTextureSelectors();\r\n      three.wallClicked.add(wallClicked);\r\n    }\r\n\r\n    function wallClicked(halfEdge) {\r\n      if (currentTarget !== undefined && currentTarget !== null) {\r\n        currentTarget.removeOutline();\r\n      }\r\n      currentTarget = halfEdge;\r\n      currentTarget.drawOutline();\r\n      $(\"#floorTexturesDiv\").hide();\r\n      $(\"texture-context-container\").show();\r\n      $(\"#wallTextures\").show();\r\n      initTextureSelectors();\r\n      this.setState({ showWallTextureList: true });\r\n    }\r\n\r\n    // eslint-disable-next-line no-func-assign\r\n    wallClicked = wallClicked.bind(this);\r\n\r\n    function floorClicked(room) {\r\n      if (currentTarget !== undefined && currentTarget !== null) {\r\n        currentTarget.removeOutline();\r\n      }\r\n      currentTarget = room;\r\n      currentTarget.drawOutline();\r\n      this.showFloorTextureList();\r\n      $(\"#wallTextures\").hide();\r\n      $(\"texture-context-container\").show();\r\n      $(\"#floorTexturesDiv\").show();\r\n      initTextureSelectors();\r\n    }\r\n    // eslint-disable-next-line no-func-assign\r\n    floorClicked = floorClicked.bind(this);\r\n    function reset() {\r\n      // if (currentTarget !== undefined && currentTarget !== null) {\r\n      //   currentTarget.removeOutline();\r\n      // }\r\n      // $(\"texture-context-container\").hide();\r\n      // $(\"#wallTextures\").hide();\r\n      // $(\"#floorTexturesDiv\").hide();\r\n      // initTextureSelectors();\r\n    }\r\n\r\n    init();\r\n  }\r\n\r\n  handleLogoutShow(e) {\r\n    e.preventDefault();\r\n    this.props.store.cambiarModuloLogout(true);\r\n  }\r\n\r\n  handleModalRepeat(e) {\r\n    e.preventDefault();\r\n    this.props.store.cambiarModuloRepetir(true);\r\n  }\r\n\r\n  handleModalInfo(e) {\r\n    e.preventDefault();\r\n    this.props.store.cambiarModuloInformacion(true);\r\n  }\r\n\r\n  async engine(viewKey) {\r\n    /*\r\n     * Floorplanner controls\r\n     */\r\n\r\n    var ViewerFloorplanner = function (blueprint3d) {\r\n      var canvasWrapper = \"#floorplanner\";\r\n\r\n      // buttons\r\n      var move = \"#move\";\r\n      var remove = \"#delete\";\r\n      var draw = \"#draw\";\r\n\r\n      var activeStlye = \"btn-primary disabled\";\r\n\r\n      this.floorplanner = blueprint3d.floorplanner;\r\n\r\n      var scope = this;\r\n\r\n      function init() {\r\n        $(window).resize(scope.handleWindowResize);\r\n        scope.handleWindowResize();\r\n\r\n        // mode buttons\r\n        // scope.floorplanner.modeResetCallbacks.add(function (mode) {\r\n        //   // $(draw).removeClass(activeStlye);\r\n        //   // $(remove).removeClass(activeStlye);\r\n        //   // $(move).removeClass(activeStlye);\r\n        //   // if (mode === BP3D.Floorplanner.floorplannerModes.MOVE) {\r\n        //   //   $(move).addClass(activeStlye);\r\n        //   // } else if (mode === BP3D.Floorplanner.floorplannerModes.DRAW) {\r\n        //   //   $(draw).addClass(activeStlye);\r\n        //   // } else if (mode === BP3D.Floorplanner.floorplannerModes.DELETE) {\r\n        //   //   $(remove).addClass(activeStlye);\r\n        //   // }\r\n\r\n        //   // if (mode === BP3D.Floorplanner.floorplannerModes.DRAW) {\r\n        //   //   $(\"#draw-walls-hint\").show();\r\n        //   //   scope.handleWindowResize();\r\n        //   // } else {\r\n        //   //   $(\"#draw-walls-hint\").hide();\r\n        //   // }\r\n        // });\r\n\r\n        $(move).click(function () {\r\n          scope.floorplanner.setMode(BP3D.Floorplanner.floorplannerModes.MOVE);\r\n        });\r\n        // $(move).on(\"touchend\", function () {\r\n        //   scope.floorplanner.setMode(BP3D.Floorplanner.floorplannerModes.MOVE);\r\n        // });\r\n\r\n        $(draw).click(function () {\r\n          scope.floorplanner.setMode(BP3D.Floorplanner.floorplannerModes.DRAW);\r\n        });\r\n        $(draw).on(\"touchend\", function () {\r\n          scope.floorplanner.setMode(BP3D.Floorplanner.floorplannerModes.DRAW);\r\n        });\r\n\r\n        $(remove).click(function () {\r\n          scope.floorplanner.setMode(\r\n            BP3D.Floorplanner.floorplannerModes.DELETE\r\n          );\r\n        });\r\n        $(remove).on(\"touchend\", function () {\r\n          scope.floorplanner.setMode(\r\n            BP3D.Floorplanner.floorplannerModes.DELETE\r\n          );\r\n        });\r\n      }\r\n\r\n      this.updateFloorplanView = function () {\r\n        scope.floorplanner.reset();\r\n      };\r\n\r\n      this.handleWindowResize = function () {\r\n        $(canvasWrapper).height(\r\n          window.innerHeight - $(canvasWrapper).offset().top\r\n        );\r\n        scope.floorplanner.resizeView();\r\n      };\r\n\r\n      init();\r\n    };\r\n\r\n    var mainControls = function (blueprint3d) {\r\n      function newDesign() {\r\n        blueprint3d.model.loadSerialized(NEW_STRUCTURE);\r\n      }\r\n\r\n      // var loadDesign = async (event) => {\r\n      //   let name = $(\"#loadFile\").attr('name');\r\n      //   let file1 = await axios.get(\r\n      //     \"http://localhost:8001/assets/\" + name\r\n      //   );\r\n      //   // var file1 = event.target.files[0];\r\n      //   var reader = new FileReader();\r\n      //   reader.onload = function () {\r\n      //     var data = reader.result;\r\n      //     blueprint3d.model.loadSerialized(data);\r\n      //   };\r\n      //   reader.readAsText(file1);\r\n      //   $(\"#loadFile\").replaceWith($(\"#loadFile\").val(\"\").clone(true));\r\n\r\n      //   try {\r\n      //     let uri = $(\"#loadFile\").attr(\"uri\");\r\n      //     console.log(\"uri: \" + uri);\r\n      //     if (uri !== \"\") {\r\n      //       let res = await axios.get(\"http://localhost:8001/assets/\" + uri);\r\n      //       blueprint3d.model.loadSerialized(JSON.stringify(res.data));\r\n      //     }\r\n      //   } catch (e) {\r\n      //     console.log(e);\r\n      //   }\r\n      // };\r\n\r\n      // function saveDesign() {\r\n      //   var data = blueprint3d.model.exportSerialized();\r\n      //   var a = window.document.createElement(\"a\");\r\n      //   var blob = new Blob([data], {\r\n      //     type: \"text\",\r\n      //   });\r\n      //   // setBlob(blob);\r\n      //   a.href = window.URL.createObjectURL(blob);\r\n      //   a.download = \"design\";\r\n      //   document.body.appendChild(a);\r\n      //   a.click();\r\n      //   document.body.removeChild(a);\r\n      // }\r\n\r\n      // function setBlob(blob) {\r\n      //   setNewBlob(blob);\r\n      // }\r\n\r\n      function init() {\r\n        $(\"#new\").click(newDesign);\r\n        // $(\"#new\").on(\"touchend\", newDesign);\r\n\r\n        // $(\"#loadFile\").click(loadDesign);\r\n        // $(\"#loadFileLabel\").on(\"touchend\", function () {\r\n        //   $(\"#loadFile\").trigger(\"click\");\r\n        // });\r\n\r\n        // $(\"#saveFile\").click(saveDesign);\r\n        // $(\"#saveFile\").on(\"touchend\", saveDesign);\r\n      }\r\n\r\n      init();\r\n    };\r\n\r\n    /*\r\n     * Initialize!\r\n     */\r\n\r\n    var modalEffects = this.modalEffects(this.state.blueprint3d);\r\n    var viewerFloorplanner = new ViewerFloorplanner(this.state.blueprint3d);\r\n    // eslint-disable-next-line no-unused-vars\r\n    var contextMenu = this.contextMenu(this.state.blueprint3d);\r\n    var sideMenu = this.sideMenu(\r\n      this.state.blueprint3d,\r\n      viewerFloorplanner,\r\n      modalEffects\r\n    );\r\n\r\n    // eslint-disable-next-line no-unused-vars\r\n    var textureSelector = this.textureSelector(\r\n      this.state.blueprint3d,\r\n      sideMenu\r\n    );\r\n    // eslint-disable-next-line no-unused-vars\r\n    var cameraButtons = this.cameraButtons(this.state.blueprint3d);\r\n    mainControls(this.state.blueprint3d);\r\n\r\n    // This serialization format needs work\r\n    // Load a simple rectangle room\r\n    if (viewKey === \"\") {\r\n      this.state.blueprint3d.model.loadSerialized(INIT_STRUCTURE);\r\n    } else {\r\n      try {\r\n        let res = await axios.get(BASE_URL + ASSETS + viewKey);\r\n        // let file1 = new Blob(res)\r\n        // var blueprint3d = this.state.blueprint3d;\r\n        // var reader = new FileReader();\r\n        //   reader.onload = function () {\r\n        //     var data = reader.result;\r\n        //     blueprint3d.model.loadSerialized(data);\r\n        //   };\r\n        //   reader.readAsText(file1);\r\n        this.state.blueprint3d.model.loadSerialized(JSON.stringify(res.data));\r\n      } catch (e) {\r\n        console.log(e);\r\n        this.state.blueprint3d.model.loadSerialized(INIT_STRUCTURE);\r\n      }\r\n    }\r\n  }\r\n\r\n  // eslint-disable-next-line no-dupe-class-members\r\n  componentDidMount() {\r\n    const opts = {\r\n      floorplannerElement: \"floorplanner-canvas\",\r\n      threeElement: \"#viewer\",\r\n      threeCanvasElement: \"three-canvas\",\r\n      textureDir: \"rooms/textures/\",\r\n      widget: false,\r\n    };\r\n    this.setState({ blueprint3d: new BP3D.Blueprint3d(opts) }, () => {\r\n      if (this.props.viewKey) {\r\n        this.engine(this.props.viewKey);\r\n      } else {\r\n        this.engine(\"\");\r\n      }\r\n    });\r\n  }\r\n\r\n  setDesignState(newState, firstTime) {\r\n    firstTime = firstTime || false;\r\n    var ACTIVE_CLASS = \"active\";\r\n\r\n    $(\"#items_tab\").removeClass(ACTIVE_CLASS);\r\n    $(\"#design_tab\").addClass(ACTIVE_CLASS);\r\n\r\n    // show and hide the right divs\r\n    $(\"#add-items\").hide();\r\n    $(\"#viewer\").show();\r\n\r\n    this.state.blueprint3d.three.updateWindowSize();\r\n\r\n    // set new state\r\n    function handleWindowResize() {\r\n      $(\".sidebar\").height(window.innerHeight);\r\n      $(\"#add-items\").height(window.innerHeight);\r\n    }\r\n    handleWindowResize();\r\n\r\n    function reset() {\r\n      $(\"texture-context-container\").hide();\r\n      $(\"#wallTextures\").hide();\r\n      $(\"#floorTexturesDiv\").hide();\r\n    }\r\n\r\n    reset();\r\n    this.setState({ currentStateName: \"Design\" });\r\n\r\n    //change mobx state-active-tab\r\n  }\r\n\r\n  componentDidUpdate(prevProps, prevState, snapShot) {\r\n    if (this.props.añadirManejadorDeClick) {\r\n      // this.setState({ añadirManejadorDeClick: true });\r\n      this.props.store.cambiarManejadorDeClick(false);\r\n      this.initItems(this.state.blueprint3d, this.setDesignState);\r\n    }\r\n    if (\r\n      this.props.añadirManejadorDeClick === false &&\r\n      prevProps.añadirManejadorDeClick\r\n    ) {\r\n      this.setState({ añadirManejadorDeClick: false });\r\n    }\r\n  }\r\n\r\n  render() {\r\n    console.log(\r\n      \"Renderizando AppContenido. showFloorTextureList:\",\r\n      this.state.showFloorTextureList\r\n    );\r\n    const { store } = this.props;\r\n    return (\r\n      <div className=\"horizontal-container\">\r\n        {/* Left Column */}\r\n\r\n        <div id=\"texture-context-container\">\r\n          {/* Context Menu */}\r\n          <div id=\"context-menu\">\r\n            <ContextMenu />\r\n          </div>\r\n          {/* Floor Textures */}\r\n          {this.state.showFloorTextureList && (\r\n            <div id=\"floorTexturesDiv\">\r\n              <FloorTextureList\r\n                onClose={this.closeFloorTextureList}\r\n                usuarioHaIniciadoSesion={this.props.store.obtenerInicioDeSesion}\r\n              />\r\n            </div>\r\n          )}\r\n\r\n          {/* Wall Textures */}\r\n          {this.state.showWallTextureList && (\r\n            <div id=\"wallTextures\">\r\n              <WallTextureList\r\n                onClose={this.closeWallTextureList}\r\n                usuarioHaIniciadoSesion={store.obtenerInicioDeSesion}\r\n              />\r\n            </div>\r\n          )}\r\n        </div>\r\n        {/* End Left Column */}\r\n\r\n        {/* Right Column */}\r\n        <div className=\"right-container\">\r\n          {/* 3D Viewer */}\r\n          <div id=\"viewer\">\r\n            {/* <div id=\"camera-controls\">\r\n              <Button\r\n                variant=\"info\"\r\n                size=\"sm\"\r\n                id=\"zoom-out\"\r\n                className={\"basic-button\"}\r\n              >\r\n                <FaSearchMinus />\r\n              </Button>\r\n              <Button\r\n                variant=\"info\"\r\n                size=\"sm\"\r\n                id=\"reset-view\"\r\n                className={\"basic-button\"}\r\n              >\r\n                <FaHome />\r\n              </Button>\r\n              <Button\r\n                variant=\"info\"\r\n                size=\"sm\"\r\n                id=\"zoom-in\"\r\n                className={\"basic-button\"}\r\n              >\r\n                <FaSearchPlus />\r\n              </Button>\r\n\r\n              <Button\r\n                variant=\"info\"\r\n                size=\"sm\"\r\n                id=\"move-left\"\r\n                className={\"basic-button\"}\r\n              >\r\n                <FaArrowLeft />\r\n              </Button>\r\n              <div className={\"vertical-controls-container\"}>\r\n                <Button\r\n                  variant=\"info\"\r\n                  size=\"sm\"\r\n                  id=\"move-up\"\r\n                  className={\"basic-button\"}\r\n                >\r\n                  <FaArrowUp />\r\n                </Button>\r\n                <Button\r\n                  variant=\"info\"\r\n                  size=\"sm\"\r\n                  id=\"move-down\"\r\n                  className={\"basic-button\"}\r\n                >\r\n                  <FaArrowDown />\r\n                </Button>\r\n              </div>\r\n              <Button\r\n                variant=\"info\"\r\n                size=\"sm\"\r\n                id=\"move-right\"\r\n                className={\"basic-button\"}\r\n              >\r\n                <FaArrowRight />\r\n              </Button>\r\n            </div> */}\r\n\r\n            <div id=\"loading-modal\">\r\n              <h1>Loading...</h1>\r\n            </div>\r\n          </div>\r\n\r\n          {/*2D Floorplanner */}\r\n          <div id=\"floorplanner\">\r\n            <canvas id=\"floorplanner-canvas\"></canvas>\r\n            <div id=\"floorplanner-controls\">\r\n              <Button\r\n                variant=\"info\"\r\n                size=\"sm\"\r\n                className=\"icon-text-button\"\r\n                id=\"move\"\r\n              >\r\n                <span className=\"icon-centre\">\r\n                  <FaArrowsAlt />\r\n                </span>\r\n                <span className=\"text-centre\">Mover Muros</span>\r\n              </Button>\r\n              <Button\r\n                variant=\"info\"\r\n                size=\"sm\"\r\n                className=\"icon-text-button\"\r\n                id=\"draw\"\r\n              >\r\n                <span className=\"icon-centre\">\r\n                  <FaPencilAlt />\r\n                </span>\r\n                <span className=\"text-centre\">Dibujar Muros</span>\r\n              </Button>\r\n              <Button\r\n                variant=\"info\"\r\n                size=\"sm\"\r\n                className=\"icon-text-button\"\r\n                id=\"delete\"\r\n              >\r\n                <span className=\"icon-centre\">\r\n                  <FaTrashAlt />\r\n                </span>\r\n                <span className=\"text-centre\">Borrar Muros</span>\r\n              </Button>\r\n\r\n              <Button\r\n                variant=\"info\"\r\n                size=\"sm\"\r\n                className=\"icon-text-button\"\r\n                id=\"update-floorplan\"\r\n              >\r\n                <span className=\"text-centre\">Listo</span>\r\n                <span className=\"icon-centre\">\r\n                  <FaChevronRight />\r\n                </span>\r\n              </Button>\r\n            </div>\r\n            <div id=\"draw-walls-hint\">\r\n              Press the \"Esc\" key to stop drawing walls\r\n            </div>\r\n          </div>\r\n          {/* Add Items */}\r\n          <div id=\"add-items\">\r\n            <Tabs\r\n              variant=\"pills\"\r\n              style={{\r\n                display: \"flex\",\r\n                flexDirection: \"column\",\r\n                width: \"100px\",\r\n                position: \"absolute\",\r\n                right: \"100px\",\r\n                top: \"100px\",\r\n              }}\r\n              id=\"controlled-tab-example\"\r\n              activeKey={this.state.key}\r\n              onSelect={(k) => {\r\n                this.setState({ key: k });\r\n              }}\r\n            >\r\n              {/* <Tab eventKey=\"sofa\" title=\"Sofas\">\r\n                <CardListSofa usuarioHaIniciadoSesion={store.obtenerInicioDeSesion} />\r\n              </Tab> */}\r\n              <Tab eventKey=\"chair\" title=\"Sillas\">\r\n                <CardListChair\r\n                  usuarioHaIniciadoSesion={store.obtenerInicioDeSesion}\r\n                />\r\n              </Tab>\r\n              <Tab eventKey=\"rug\" title=\"Alfombras\">\r\n                <CardListRug\r\n                  usuarioHaIniciadoSesion={store.obtenerInicioDeSesion}\r\n                />\r\n              </Tab>\r\n              <Tab eventKey=\"misc\" title=\"Oficina personal y corporativa\">\r\n                <CardListMisc\r\n                  usuarioHaIniciadoSesion={store.obtenerInicioDeSesion}\r\n                />\r\n              </Tab>\r\n              <Tab eventKey=\"light\" title=\"Luces\">\r\n                <CardListLight\r\n                  usuarioHaIniciadoSesion={store.obtenerInicioDeSesion}\r\n                />\r\n              </Tab>\r\n              <Tab eventKey=\"arch\" title=\"Architectural\">\r\n                <CardListArch\r\n                  usuarioHaIniciadoSesion={store.obtenerInicioDeSesion}\r\n                />\r\n              </Tab>\r\n            </Tabs>\r\n          </div>\r\n          <div className=\"menu\">\r\n            <div display=\"flex\">\r\n              <ul className=\"nav nav-sidebar\">\r\n                <li id=\"design_tab\">\r\n                  <OverlayTrigger\r\n                    placement=\"right\"\r\n                    overlay={<Tooltip>Diseñar</Tooltip>}\r\n                  >\r\n                    <div className=\"icons\">\r\n                      <div className=\"iconWrapper\">\r\n                        <FaCube size=\"25px\" />\r\n                      </div>\r\n                    </div>\r\n                  </OverlayTrigger>\r\n                </li>\r\n                <li id=\"floorplan_tab\">\r\n                  <OverlayTrigger\r\n                    placement=\"right\"\r\n                    overlay={<Tooltip>Editar piso</Tooltip>}\r\n                  >\r\n                    <div className=\"icons\">\r\n                      <div className=\"iconWrapper\">\r\n                        <FaPenFancy size=\"25px\" />\r\n                      </div>\r\n                    </div>\r\n                  </OverlayTrigger>\r\n                </li>\r\n                <li id=\"items_tab\">\r\n                  <OverlayTrigger\r\n                    placement=\"right\"\r\n                    overlay={<Tooltip>Añadir objeto</Tooltip>}\r\n                  >\r\n                    <div className=\"icons\">\r\n                      <div className=\"iconWrapper\">\r\n                        <FaPlus size=\"25px\" />\r\n                      </div>\r\n                    </div>\r\n                  </OverlayTrigger>\r\n                </li>\r\n                <li id=\"items_tab\">\r\n                  <img\r\n                    src=\"./logo.png\"\r\n                    className=\"top-bar-logo\"\r\n                    alt=\"\"\r\n                    style={{\r\n                      width: \"100px\",\r\n                      height: \"100px\",\r\n                      margin: \"-5px 10px 0 10px\",\r\n                    }}\r\n                  />\r\n                </li>\r\n                <li style={{ display: \"none\" }}>\r\n                  <OverlayTrigger\r\n                    placement=\"right\"\r\n                    overlay={<Tooltip>Repetir plano</Tooltip>}\r\n                  >\r\n                    <Button\r\n                      className=\"repeatButton\"\r\n                      onClick={this.handleModalRepeat}\r\n                    >\r\n                      <div className=\"icons\" id=\"new\">\r\n                        <div\r\n                          className=\"iconWrapper\"\r\n                          style={{ margin: 0, padding: 0 }}\r\n                        >\r\n                          <FaRedo size=\"25px\" />\r\n                        </div>\r\n                      </div>\r\n                    </Button>\r\n                  </OverlayTrigger>\r\n                </li>\r\n                <li>\r\n                  <OverlayTrigger\r\n                    placement=\"right\"\r\n                    overlay={<Tooltip>Repetir plano</Tooltip>}\r\n                  >\r\n                    <Button\r\n                      className=\"repeatButton\"\r\n                      onClick={this.handleModalRepeat}\r\n                    >\r\n                      <div className=\"icons\" id=\"new\">\r\n                        <div\r\n                          className=\"iconWrapper\"\r\n                          style={{ margin: 0, padding: 0 }}\r\n                        >\r\n                          <FaRedo size=\"25px\" />\r\n                        </div>\r\n                      </div>\r\n                    </Button>\r\n                  </OverlayTrigger>\r\n                </li>\r\n                <li id=\"design_tab\">\r\n                  <ScreenCaptureButton />\r\n                </li>\r\n                <li>\r\n                  <OverlayTrigger\r\n                    placement=\"right\"\r\n                    overlay={<Tooltip>Información</Tooltip>}\r\n                  >\r\n                    <Button\r\n                      className=\"repeatButton\"\r\n                      onClick={this.handleModalInfo}\r\n                    >\r\n                      <div className=\"icons\" id=\"new\">\r\n                        <div\r\n                          className=\"iconWrapper\"\r\n                          style={{ margin: 0, padding: 0 }}\r\n                        >\r\n                          <FaInfoCircle size=\"25px\" />\r\n                        </div>\r\n                      </div>\r\n                    </Button>\r\n                  </OverlayTrigger>\r\n                </li>\r\n                <li>\r\n                  <Button\r\n                    variant=\"outline-dark\"\r\n                    className=\"top-bar-login-button\"\r\n                    style={{ position: \"absolute\", top: \"10px\", right: 150 }}\r\n                    onClick={this.generateReport}\r\n                  >\r\n                    Generar Reporte\r\n                  </Button>\r\n                </li>\r\n                <li>\r\n                  <Button\r\n                    variant=\"outline-dark\"\r\n                    className=\"top-bar-login-button\"\r\n                    style={{ position: \"absolute\", top: \"10px\", right: 0 }}\r\n                    onClick={this.handleLogoutShow}\r\n                  >\r\n                    Salir\r\n                  </Button>\r\n                </li>\r\n              </ul>\r\n            </div>\r\n          </div>\r\n        </div>\r\n        {/* End Right Column */}\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default AppContenido;\r\n"]},"metadata":{},"sourceType":"module"}
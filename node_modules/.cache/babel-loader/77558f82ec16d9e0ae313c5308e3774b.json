{"ast":null,"code":"var _dec,\n    _class,\n    _temp,\n    _jsxFileName = \"C:\\\\Users\\\\carli\\\\OneDrive\\\\Escritorio\\\\Dev\\\\astrid\\\\InteriorDesing\\\\src\\\\Components\\\\LoginLogoutModal\\\\LoginModal\\\\SignupForm.jsx\";\n\nimport \"../../../App.css\";\nimport React, { Component } from \"react\";\nimport { inject, observer } from \"mobx-react\";\nimport Button from \"react-bootstrap/Button\";\nimport { validateEmail, validatePassword, validateUsername } from \"../../../Utils/Utils\";\nimport axios from \"axios\";\nimport { BASE_URL_AUTH, USERS } from \"../../../Constants.js\";\nimport LargeAlert from \"../../LargeAlert.jsx\";\nimport SmallAlert from \"../../SmallAlert\";\nlet SignupForm = (_dec = inject(\"store\"), _dec(_class = observer(_class = (_temp = class SignupForm extends Component {\n  constructor(props) {\n    super(props);\n\n    this.updateDisabledState = () => {\n      const {\n        signupUsernameFormatError,\n        signupEmailFormatError,\n        signupPasswordFormatError,\n        signupPasswordConfirmationFormatError,\n        signupQuestionFormatError,\n        signupAnswerFormatError\n      } = this.state;\n      this.setState({\n        isDisabled: signupUsernameFormatError || signupEmailFormatError || signupPasswordFormatError || signupPasswordConfirmationFormatError || signupQuestionFormatError || signupAnswerFormatError\n      });\n    };\n\n    this.handleSignupUsernameChange = e => {\n      const value = e.target.value;\n      this.setState({\n        signupUsernameValue: value,\n        signupUsernameFormatError: !validateUsername(value)\n      }, this.updateDisabledState);\n    };\n\n    this.handleSignupEmailChange = e => {\n      const value = e.target.value;\n      this.setState({\n        signupEmailValue: value,\n        signupEmailFormatError: !validateEmail(value)\n      }, this.updateDisabledState);\n    };\n\n    this.handleSignupPasswordChange = e => {\n      const value = e.target.value;\n      this.setState({\n        signupPasswordValue: value,\n        signupPasswordFormatError: !validatePassword(value)\n      }, this.updateDisabledState);\n    };\n\n    this.handleSignupPasswordConfirmationChange = e => {\n      const value = e.target.value;\n      this.setState({\n        signupPasswordConfirmationValue: value,\n        signupPasswordConfirmationFormatError: this.state.signupPasswordValue !== value\n      }, this.updateDisabledState);\n    };\n\n    this.handleSignupQuestionChange = e => {\n      const value = e.target.value;\n      this.setState({\n        signupQuestionValue: value,\n        signupQuestionFormatError: value === \"\"\n      }, this.updateDisabledState);\n    };\n\n    this.handleSignupAnswerChange = e => {\n      const value = e.target.value;\n      this.setState({\n        signupAnswerValue: value,\n        signupAnswerFormatError: value === \"\"\n      }, this.updateDisabledState);\n    };\n\n    this.handleSignupSubmit = async e => {\n      e.preventDefault();\n\n      if (!this.state.isDisabled) {\n        const user = {\n          name: this.state.signupUsernameValue,\n          username: this.state.signupUsernameValue,\n          email: this.state.signupEmailValue,\n          password: this.state.signupPasswordValue,\n          password_confirmation: this.state.signupPasswordConfirmationValue,\n          security_question: this.state.signupQuestionValue,\n          security_answer: this.state.signupAnswerValue\n        };\n\n        try {\n          await axios.post(`${BASE_URL_AUTH}${USERS}`, user);\n          this.setState({\n            isError: false,\n            isEmailExists: false,\n            isDisabled: true,\n            isRegistered: true\n          });\n          window.location.pathname = \"/inicio-sesion\";\n        } catch (e) {\n          if (e.response) {\n            if (e.response.status === 403) {\n              this.setState({\n                isEmailExists: true\n              });\n            } else {\n              this.setState({\n                isError: true\n              });\n            }\n          } else {\n            this.setState({\n              isError: true\n            });\n          }\n        }\n      }\n    };\n\n    this.state = {\n      signupUsernameValue: \"\",\n      signupEmailValue: \"\",\n      signupPasswordValue: \"\",\n      signupPasswordConfirmationValue: \"\",\n      signupQuestionValue: \"¿Cuál es el nombre de su primera mascota?\",\n      signupAnswerValue: \"\",\n      signupUsernameFormatError: false,\n      signupEmailFormatError: false,\n      signupPasswordFormatError: false,\n      signupPasswordConfirmationFormatError: false,\n      signupQuestionFormatError: false,\n      signupAnswerFormatError: false,\n      isDisabled: true,\n      isRegistered: false,\n      isEmailExists: false,\n      isError: false\n    };\n  } // Función para actualizar el estado de `isDisabled` en base a los errores\n\n\n  render() {\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: \"vertical-container\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 170,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(\"form\", {\n      className: \"login-form\",\n      onSubmit: this.handleSignupSubmit,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 171,\n        columnNumber: 9\n      }\n    }, this.state.signupUsernameFormatError && /*#__PURE__*/React.createElement(SmallAlert, {\n      message: \"Usuario inv\\xE1lido\",\n      variant: \"danger\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 173,\n        columnNumber: 13\n      }\n    }), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"login-form-input-space\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 175,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(\"input\", {\n      placeholder: \"Usuario\",\n      type: \"text\",\n      value: this.state.signupUsernameValue,\n      onChange: this.handleSignupUsernameChange,\n      className: \"login-form-input\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 176,\n        columnNumber: 13\n      }\n    })), this.state.signupEmailFormatError && /*#__PURE__*/React.createElement(SmallAlert, {\n      message: \"Correo inv\\xE1lido\",\n      variant: \"danger\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 185,\n        columnNumber: 13\n      }\n    }), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"login-form-input-space\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 187,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(\"input\", {\n      placeholder: \"Correo electr\\xF3nico\",\n      type: \"email\",\n      value: this.state.signupEmailValue,\n      onChange: this.handleSignupEmailChange,\n      className: \"login-form-input\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 188,\n        columnNumber: 13\n      }\n    })), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"login-form-input-space\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 196,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(\"input\", {\n      placeholder: \"Contrase\\xF1a\",\n      type: \"password\",\n      value: this.state.signupPasswordValue,\n      onChange: this.handleSignupPasswordChange,\n      className: \"login-form-input\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 197,\n        columnNumber: 13\n      }\n    })), this.state.signupPasswordFormatError && /*#__PURE__*/React.createElement(SmallAlert, {\n      message: \"Contrase\\xF1a inv\\xE1lida: Debe tener al menos 8 caracteres, incluir letras, n\\xFAmeros y caracteres especiales.\",\n      variant: \"danger\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 206,\n        columnNumber: 13\n      }\n    }), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"login-form-input-space\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 211,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(\"input\", {\n      placeholder: \"Confirmar contrase\\xF1a\",\n      type: \"password\",\n      value: this.state.signupPasswordConfirmationValue,\n      onChange: this.handleSignupPasswordConfirmationChange,\n      className: \"login-form-input\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 212,\n        columnNumber: 13\n      }\n    })), this.state.signupPasswordConfirmationFormatError && /*#__PURE__*/React.createElement(SmallAlert, {\n      message: \"Las contrase\\xF1as no coinciden\",\n      variant: \"danger\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 221,\n        columnNumber: 13\n      }\n    }), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"login-form-input-space\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 226,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(\"select\", {\n      className: \"login-form-input\",\n      value: this.state.signupQuestionValue,\n      onChange: this.handleSignupQuestionChange,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 227,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"option\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 232,\n        columnNumber: 15\n      }\n    }, \"\\xBFCu\\xE1l es el nombre de su primera mascota?\"), /*#__PURE__*/React.createElement(\"option\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 233,\n        columnNumber: 15\n      }\n    }, \"\\xBFCu\\xE1l es el segundo nombre de su madre?\"), /*#__PURE__*/React.createElement(\"option\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 234,\n        columnNumber: 15\n      }\n    }, \"\\xBFEn qu\\xE9 ciudad naci\\xF3 usted?\"), /*#__PURE__*/React.createElement(\"option\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 235,\n        columnNumber: 15\n      }\n    }, \"\\xBFEn qu\\xE9 a\\xF1o termin\\xF3 su carrera?\"), /*#__PURE__*/React.createElement(\"option\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 236,\n        columnNumber: 15\n      }\n    }, \"\\xBFQui\\xE9n es su profesor de seminario favorito?\"))), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"login-form-input-space\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 239,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(\"input\", {\n      placeholder: \"Respuesta de seguridad\",\n      type: \"text\",\n      value: this.state.signupAnswerValue,\n      onChange: this.handleSignupAnswerChange,\n      className: \"login-form-input\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 240,\n        columnNumber: 13\n      }\n    })), /*#__PURE__*/React.createElement(Button, {\n      variant: \"info\",\n      className: \"login-submit-button\",\n      type: \"submit\",\n      disabled: this.state.isDisabled,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 248,\n        columnNumber: 11\n      }\n    }, \"Registrarse\")), this.state.isRegistered && /*#__PURE__*/React.createElement(LargeAlert, {\n      message: \"Usuario registrado correctamente\",\n      variant: \"success\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 259,\n        columnNumber: 11\n      }\n    }), this.state.isError && /*#__PURE__*/React.createElement(LargeAlert, {\n      message: \"Error en el registro, intente nuevamente\",\n      variant: \"danger\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 265,\n        columnNumber: 11\n      }\n    }), this.state.isEmailExists && /*#__PURE__*/React.createElement(LargeAlert, {\n      message: \"El correo electr\\xF3nico ya est\\xE1 registrado\",\n      variant: \"danger\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 271,\n        columnNumber: 11\n      }\n    }));\n  }\n\n}, _temp)) || _class) || _class);\nexport default SignupForm;","map":{"version":3,"sources":["C:/Users/carli/OneDrive/Escritorio/Dev/astrid/InteriorDesing/src/Components/LoginLogoutModal/LoginModal/SignupForm.jsx"],"names":["React","Component","inject","observer","Button","validateEmail","validatePassword","validateUsername","axios","BASE_URL_AUTH","USERS","LargeAlert","SmallAlert","SignupForm","constructor","props","updateDisabledState","signupUsernameFormatError","signupEmailFormatError","signupPasswordFormatError","signupPasswordConfirmationFormatError","signupQuestionFormatError","signupAnswerFormatError","state","setState","isDisabled","handleSignupUsernameChange","e","value","target","signupUsernameValue","handleSignupEmailChange","signupEmailValue","handleSignupPasswordChange","signupPasswordValue","handleSignupPasswordConfirmationChange","signupPasswordConfirmationValue","handleSignupQuestionChange","signupQuestionValue","handleSignupAnswerChange","signupAnswerValue","handleSignupSubmit","preventDefault","user","name","username","email","password","password_confirmation","security_question","security_answer","post","isError","isEmailExists","isRegistered","window","location","pathname","response","status","render"],"mappings":"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","sourcesContent":["import \"../../../App.css\";\r\nimport React, { Component } from \"react\";\r\nimport { inject, observer } from \"mobx-react\";\r\nimport Button from \"react-bootstrap/Button\";\r\nimport {\r\n  validateEmail,\r\n  validatePassword,\r\n  validateUsername,\r\n} from \"../../../Utils/Utils\";\r\nimport axios from \"axios\";\r\nimport { BASE_URL_AUTH, USERS } from \"../../../Constants.js\";\r\nimport LargeAlert from \"../../LargeAlert.jsx\";\r\nimport SmallAlert from \"../../SmallAlert\";\r\n\r\n@inject(\"store\")\r\n@observer\r\nclass SignupForm extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      signupUsernameValue: \"\",\r\n      signupEmailValue: \"\",\r\n      signupPasswordValue: \"\",\r\n      signupPasswordConfirmationValue: \"\",\r\n      signupQuestionValue: \"¿Cuál es el nombre de su primera mascota?\",\r\n      signupAnswerValue: \"\",\r\n\r\n      signupUsernameFormatError: false,\r\n      signupEmailFormatError: false,\r\n      signupPasswordFormatError: false,\r\n      signupPasswordConfirmationFormatError: false,\r\n      signupQuestionFormatError: false,\r\n      signupAnswerFormatError: false,\r\n\r\n      isDisabled: true,\r\n      isRegistered: false,\r\n      isEmailExists: false,\r\n      isError: false,\r\n    };\r\n  }\r\n\r\n  // Función para actualizar el estado de `isDisabled` en base a los errores\r\n  updateDisabledState = () => {\r\n    const {\r\n      signupUsernameFormatError,\r\n      signupEmailFormatError,\r\n      signupPasswordFormatError,\r\n      signupPasswordConfirmationFormatError,\r\n      signupQuestionFormatError,\r\n      signupAnswerFormatError,\r\n    } = this.state;\r\n\r\n    this.setState({\r\n      isDisabled:\r\n        signupUsernameFormatError ||\r\n        signupEmailFormatError ||\r\n        signupPasswordFormatError ||\r\n        signupPasswordConfirmationFormatError ||\r\n        signupQuestionFormatError ||\r\n        signupAnswerFormatError,\r\n    });\r\n  };\r\n\r\n  handleSignupUsernameChange = (e) => {\r\n    const value = e.target.value;\r\n    this.setState(\r\n      {\r\n        signupUsernameValue: value,\r\n        signupUsernameFormatError: !validateUsername(value),\r\n      },\r\n      this.updateDisabledState\r\n    );\r\n  };\r\n\r\n  handleSignupEmailChange = (e) => {\r\n    const value = e.target.value;\r\n    this.setState(\r\n      {\r\n        signupEmailValue: value,\r\n        signupEmailFormatError: !validateEmail(value),\r\n      },\r\n      this.updateDisabledState\r\n    );\r\n  };\r\n\r\n  handleSignupPasswordChange = (e) => {\r\n    const value = e.target.value;\r\n    this.setState(\r\n      {\r\n        signupPasswordValue: value,\r\n        signupPasswordFormatError: !validatePassword(value),\r\n      },\r\n      this.updateDisabledState\r\n    );\r\n  };\r\n\r\n  handleSignupPasswordConfirmationChange = (e) => {\r\n    const value = e.target.value;\r\n    this.setState(\r\n      {\r\n        signupPasswordConfirmationValue: value,\r\n        signupPasswordConfirmationFormatError:\r\n          this.state.signupPasswordValue !== value,\r\n      },\r\n      this.updateDisabledState\r\n    );\r\n  };\r\n\r\n  handleSignupQuestionChange = (e) => {\r\n    const value = e.target.value;\r\n    this.setState(\r\n      {\r\n        signupQuestionValue: value,\r\n        signupQuestionFormatError: value === \"\",\r\n      },\r\n      this.updateDisabledState\r\n    );\r\n  };\r\n\r\n  handleSignupAnswerChange = (e) => {\r\n    const value = e.target.value;\r\n    this.setState(\r\n      {\r\n        signupAnswerValue: value,\r\n        signupAnswerFormatError: value === \"\",\r\n      },\r\n      this.updateDisabledState\r\n    );\r\n  };\r\n\r\n  handleSignupSubmit = async (e) => {\r\n    e.preventDefault();\r\n\r\n    if (!this.state.isDisabled) {\r\n      const user = {\r\n        name: this.state.signupUsernameValue,\r\n        username: this.state.signupUsernameValue,\r\n        email: this.state.signupEmailValue,\r\n        password: this.state.signupPasswordValue,\r\n        password_confirmation: this.state.signupPasswordConfirmationValue,\r\n        security_question: this.state.signupQuestionValue,\r\n        security_answer: this.state.signupAnswerValue,\r\n      };\r\n\r\n      try {\r\n        await axios.post(`${BASE_URL_AUTH}${USERS}`, user);\r\n        this.setState({\r\n          isError: false,\r\n          isEmailExists: false,\r\n          isDisabled: true,\r\n          isRegistered: true,\r\n        });\r\n        window.location.pathname = \"/inicio-sesion\";\r\n      } catch (e) {\r\n        if (e.response) {\r\n          if (e.response.status === 403) {\r\n            this.setState({ isEmailExists: true });\r\n          } else {\r\n            this.setState({ isError: true });\r\n          }\r\n        } else {\r\n          this.setState({ isError: true });\r\n        }\r\n      }\r\n    }\r\n  };\r\n\r\n  render() {\r\n    return (\r\n      <div className=\"vertical-container\">\r\n        <form className=\"login-form\" onSubmit={this.handleSignupSubmit}>\r\n          {this.state.signupUsernameFormatError && (\r\n            <SmallAlert message=\"Usuario inválido\" variant=\"danger\" />\r\n          )}\r\n          <div className=\"login-form-input-space\">\r\n            <input\r\n              placeholder=\"Usuario\"\r\n              type=\"text\"\r\n              value={this.state.signupUsernameValue}\r\n              onChange={this.handleSignupUsernameChange}\r\n              className=\"login-form-input\"\r\n            />\r\n          </div>\r\n          {this.state.signupEmailFormatError && (\r\n            <SmallAlert message=\"Correo inválido\" variant=\"danger\" />\r\n          )}\r\n          <div className=\"login-form-input-space\">\r\n            <input\r\n              placeholder=\"Correo electrónico\"\r\n              type=\"email\"\r\n              value={this.state.signupEmailValue}\r\n              onChange={this.handleSignupEmailChange}\r\n              className=\"login-form-input\"\r\n            />\r\n          </div>\r\n          <div className=\"login-form-input-space\">\r\n            <input\r\n              placeholder=\"Contraseña\"\r\n              type=\"password\"\r\n              value={this.state.signupPasswordValue}\r\n              onChange={this.handleSignupPasswordChange}\r\n              className=\"login-form-input\"\r\n            />\r\n          </div>\r\n          {this.state.signupPasswordFormatError && (\r\n            <SmallAlert\r\n              message=\"Contraseña inválida: Debe tener al menos 8 caracteres, incluir letras, números y caracteres especiales.\"\r\n              variant=\"danger\"\r\n            />\r\n          )}\r\n          <div className=\"login-form-input-space\">\r\n            <input\r\n              placeholder=\"Confirmar contraseña\"\r\n              type=\"password\"\r\n              value={this.state.signupPasswordConfirmationValue}\r\n              onChange={this.handleSignupPasswordConfirmationChange}\r\n              className=\"login-form-input\"\r\n            />\r\n          </div>\r\n          {this.state.signupPasswordConfirmationFormatError && (\r\n            <SmallAlert\r\n              message=\"Las contraseñas no coinciden\"\r\n              variant=\"danger\"\r\n            />\r\n          )}\r\n          <div className=\"login-form-input-space\">\r\n            <select\r\n              className=\"login-form-input\"\r\n              value={this.state.signupQuestionValue}\r\n              onChange={this.handleSignupQuestionChange}\r\n            >\r\n              <option>¿Cuál es el nombre de su primera mascota?</option>\r\n              <option>¿Cuál es el segundo nombre de su madre?</option>\r\n              <option>¿En qué ciudad nació usted?</option>\r\n              <option>¿En qué año terminó su carrera?</option>\r\n              <option>¿Quién es su profesor de seminario favorito?</option>\r\n            </select>\r\n          </div>\r\n          <div className=\"login-form-input-space\">\r\n            <input\r\n              placeholder=\"Respuesta de seguridad\"\r\n              type=\"text\"\r\n              value={this.state.signupAnswerValue}\r\n              onChange={this.handleSignupAnswerChange}\r\n              className=\"login-form-input\"\r\n            />\r\n          </div>\r\n          <Button\r\n            variant=\"info\"\r\n            className=\"login-submit-button\"\r\n            type=\"submit\"\r\n            disabled={this.state.isDisabled}\r\n          >\r\n            Registrarse\r\n          </Button>\r\n        </form>\r\n\r\n        {this.state.isRegistered && (\r\n          <LargeAlert\r\n            message=\"Usuario registrado correctamente\"\r\n            variant=\"success\"\r\n          />\r\n        )}\r\n        {this.state.isError && (\r\n          <LargeAlert\r\n            message=\"Error en el registro, intente nuevamente\"\r\n            variant=\"danger\"\r\n          />\r\n        )}\r\n        {this.state.isEmailExists && (\r\n          <LargeAlert\r\n            message=\"El correo electrónico ya está registrado\"\r\n            variant=\"danger\"\r\n          />\r\n        )}\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default SignupForm;\r\n"]},"metadata":{},"sourceType":"module"}
{"ast":null,"code":"var _dec,\n    _class,\n    _temp,\n    _jsxFileName = \"/home/javier/work/urbe/Feldspar-master/src/Components/BlueprintPage.jsx\";\n\nimport \"../App.css\";\nimport React, { Component } from \"react\";\nimport $ from \"jquery\";\nimport axios from \"axios\";\nimport { BP3D } from \"../engine/blueprint3d.js\";\nimport { INIT_STRUCTURE, NEW_STRUCTURE } from \"../Structures.js\";\nimport { BASE_URL, ASSETS } from \"../Constants.js\";\nimport TopBarButton from \"./TopBar/TopBarButton.jsx\";\nimport Button from \"react-bootstrap/Button\";\nimport { FaSearchMinus, FaSearchPlus, FaHome, FaArrowUp, FaArrowDown, FaArrowLeft, FaArrowRight, FaChevronRight, FaArrowsAlt, FaPencilAlt, FaTrashAlt, FaPencilRuler, FaDraftingCompass, FaPlus, FaRedo, FaCamera, FaPenFancy, FaCube } from \"react-icons/fa\";\nimport { Tabs, Tab, OverlayTrigger, Tooltip } from \"react-bootstrap\";\nimport CardListSofa from \"./AddItems/CardListSofa.jsx\";\nimport CardListChair from \"./AddItems/CardListChair.jsx\";\nimport CardListRug from \"./AddItems/CardListRug.jsx\";\nimport CardListMisc from \"./AddItems/CardListMisc.jsx\";\nimport CardListKitchen from \"./AddItems/CardListKitchen.jsx\";\nimport CardListArch from \"./AddItems/CardListArch.jsx\";\nimport CardListLight from \"./AddItems/CardListLight.jsx\";\nimport FloorTextureList from \"./TextureList/FloorTextureList.jsx\";\nimport WallTextureList from \"./TextureList/WallTextureList.jsx\";\nimport ContextMenu from \"./ContextMenu.jsx\";\nimport SaveButton from \"./SaveLoadModal/SaveFile/SaveButton.jsx\";\nimport LoadButton from \"./SaveLoadModal/LoadFile/LoadButton.jsx\";\nimport SaveModal from \"./SaveLoadModal/SaveFile/SaveModal.jsx\";\nimport LoadModal from \"./SaveLoadModal/LoadFile/LoadModal.jsx\";\nimport { inject, observer } from \"mobx-react\";\nlet BlueprintPage = (_dec = inject(\"store\"), _dec(_class = observer(_class = (_temp = class BlueprintPage extends Component {\n  constructor(props) {\n    super(props);\n\n    this.sideMenu = function (blueprint3d, floorplanControls, modalEffects) {\n      // var modalEffects = modalEffectsArg;\n      var ACTIVE_CLASS = \"active\";\n      var tabs = {\n        FLOORPLAN: $(\"#floorplan_tab\"),\n        SHOP: $(\"#items_tab\"),\n        DESIGN: $(\"#design_tab\")\n      }; // var scope = this;\n\n      var stateChangeCallbacks = $.Callbacks();\n      var states = {\n        DEFAULT: {\n          div: $(\"#viewer\"),\n          tab: tabs.DESIGN,\n          name: \"Design\"\n        },\n        FLOORPLAN: {\n          div: $(\"#floorplanner\"),\n          tab: tabs.FLOORPLAN,\n          name: \"Floorplan\"\n        },\n        SHOP: {\n          div: $(\"#add-items\"),\n          tab: tabs.SHOP,\n          name: \"Shop\"\n        }\n      }; // sidebar state\n\n      var currentState = states.FLOORPLAN;\n\n      function init() {\n        for (var tab in tabs) {\n          var elem = tabs[tab];\n          elem.click(tabClicked(elem));\n        }\n\n        $(\"#update-floorplan\").click(floorplanUpdate);\n\n        function reset() {\n          $(\"texture-context-container\").hide();\n          $(\"#wallTextures\").hide();\n          $(\"#floorTexturesDiv\").hide();\n        }\n\n        stateChangeCallbacks.add(reset);\n        initLeftMenu();\n        blueprint3d.three.updateWindowSize();\n        handleWindowResize();\n        initItems();\n        setCurrentState(states.DEFAULT, true);\n      }\n\n      function floorplanUpdate() {\n        setCurrentState(states.DEFAULT);\n      }\n\n      function tabClicked(tab) {\n        return function () {\n          // Stop three from spinning\n          initItems();\n          blueprint3d.three.stopSpin(); // Selected a new tab\n\n          for (var key in states) {\n            var state = states[key];\n\n            if (state.tab === tab) {\n              setCurrentState(state);\n              break;\n            }\n          }\n        };\n      }\n\n      var getCurrentState = () => {\n        if (this.state.currentStateName === \"Design\") {\n          return states.DEFAULT;\n        }\n\n        if (this.state.currentStateName === \"Floorplan\") {\n          return states.FLOORPLAN;\n        }\n\n        if (this.state.currentStateName === \"Shop\") {\n          return states.SHOP;\n        }\n\n        return null;\n      };\n\n      var updateState = newState => {\n        this.setState({\n          currentStateName: newState.name\n        });\n      };\n\n      function setCurrentState(newState, firstTime) {\n        currentState = getCurrentState();\n        firstTime = firstTime || false;\n\n        if (!firstTime && currentState.name === newState.name) {\n          return;\n        } // show the right tab as active\n\n\n        if (currentState.name !== newState.name) {\n          if (currentState.tab != null) {\n            currentState.tab.removeClass(ACTIVE_CLASS);\n          }\n\n          if (newState.tab != null) {\n            newState.tab.addClass(ACTIVE_CLASS);\n          }\n        }\n\n        if (currentState.name === newState.name) {\n          newState.tab.addClass(ACTIVE_CLASS);\n        } // set item unselected\n\n\n        if (firstTime || newState.name !== \"Design\") {\n          blueprint3d.three.getController().setSelectedObject(null);\n        } // show and hide the right divs\n\n\n        currentState.div.hide();\n        newState.div.show(); // custom actions\n\n        if (newState === states.FLOORPLAN) {\n          floorplanControls.handleWindowResize();\n          floorplanControls.updateFloorplanView();\n        }\n\n        if (currentState === states.FLOORPLAN) {\n          blueprint3d.model.floorplan.update();\n        }\n\n        if (newState === states.DEFAULT) {\n          blueprint3d.three.updateWindowSize();\n        } // set new state\n\n\n        handleWindowResize();\n        currentState = newState;\n        updateState(newState);\n        stateChangeCallbacks.fire(newState); //change mobx state-active-tab\n      }\n\n      function initLeftMenu() {\n        $(window).resize(handleWindowResize);\n        handleWindowResize();\n      }\n\n      function handleWindowResize() {// $(\".sidebar\").height(window.innerHeight);\n        // $(\"#add-items\").height(window.innerHeight);\n      }\n\n      var initItems = () => {\n        this.initItems(blueprint3d, setCurrentState);\n      };\n\n      init();\n      this.setState({\n        blueprint3d: blueprint3d\n      });\n    };\n\n    this.state = {\n      key: \"chair\",\n      blueprint3d: {},\n      añadirManejadorDeClick: false,\n      currentStateName: \"Design\",\n      blob: \"\"\n    };\n    this.engine = this.engine.bind(this);\n    this.setDesignState = this.setDesignState.bind(this);\n    this.cameraButtons = this.cameraButtons.bind(this);\n    this.contextMenu = this.contextMenu.bind(this);\n    this.modalEffects = this.modalEffects.bind(this);\n    this.sideMenu = this.sideMenu.bind(this);\n    this.textureSelector = this.textureSelector.bind(this);\n    this.initItems = this.initItems.bind(this);\n    this.saveFile = this.saveFile.bind(this);\n    this.loadFile = this.loadFile.bind(this);\n    this.handleLogoutShow = this.handleLogoutShow.bind(this);\n  }\n\n  saveFile() {\n    if (this.state.blueprint3d.model !== undefined) {\n      var data = this.state.blueprint3d.model.exportSerialized(); // var a = window.document.createElement(\"a\");\n\n      var blob = new Blob([data], {\n        type: \"text\"\n      });\n      this.setState({\n        blob: blob\n      }); // a.href = window.URL.createObjectURL(blob);\n      // a.download = \"design.blueprint3d\";\n      // document.body.appendChild(a);\n      // a.click();\n      // document.body.removeChild(a);\n    }\n  }\n\n  async loadFile(uri) {\n    try {\n      // console.log(\"uri: \" + uri);\n      if (uri !== null && uri !== \"\") {\n        let res = await axios.get(BASE_URL + ASSETS + uri);\n        this.state.blueprint3d.model.loadSerialized(JSON.stringify(res.data));\n      } else {\n        console.log(\"uri is null\");\n      }\n    } catch (e) {\n      console.log(e);\n    }\n  }\n  /*\n   * Camera Buttons\n   */\n\n\n  cameraButtons(blueprint3d) {\n    var orbitControls = blueprint3d.three.controls;\n    var three = blueprint3d.three;\n    var panSpeed = 30;\n    var directions = {\n      UP: 1,\n      DOWN: 2,\n      LEFT: 3,\n      RIGHT: 4\n    };\n\n    function init() {\n      // Camera controls\n      $(\"#zoom-in\").click(zoomIn);\n      $(\"#zoom-in\").on(\"touchend\", zoomIn);\n      $(\"#zoom-out\").click(zoomOut);\n      $(\"#zoom-out\").on(\"touchend\", zoomOut);\n      $(\"#zoom-in\").dblclick(preventDefault);\n      $(\"#zoom-out\").dblclick(preventDefault);\n      $(\"#reset-view\").click(three.centerCamera);\n      $(\"#reset-view\").on(\"touchend\", three.centerCamera);\n      $(\"#move-left\").click(function () {\n        pan(directions.LEFT);\n      });\n      $(\"#move-left\").on(\"touchend\", function () {\n        pan(directions.LEFT);\n      });\n      $(\"#move-right\").click(function () {\n        pan(directions.RIGHT);\n      });\n      $(\"#move-right\").on(\"touchend\", function () {\n        pan(directions.RIGHT);\n      });\n      $(\"#move-up\").click(function () {\n        pan(directions.UP);\n      });\n      $(\"#move-up\").on(\"touchend\", function () {\n        pan(directions.UP);\n      });\n      $(\"#move-down\").click(function () {\n        pan(directions.DOWN);\n      });\n      $(\"#move-down\").on(\"touchend\", function () {\n        pan(directions.DOWN);\n      });\n      $(\"#move-left\").dblclick(preventDefault);\n      $(\"#move-right\").dblclick(preventDefault);\n      $(\"#move-up\").dblclick(preventDefault);\n      $(\"#move-down\").dblclick(preventDefault);\n    }\n\n    function preventDefault(e) {\n      e.preventDefault();\n      e.stopPropagation();\n    }\n\n    function pan(direction) {\n      switch (direction) {\n        case directions.UP:\n          orbitControls.panXY(0, panSpeed);\n          break;\n\n        case directions.DOWN:\n          orbitControls.panXY(0, -panSpeed);\n          break;\n\n        case directions.LEFT:\n          orbitControls.panXY(panSpeed, 0);\n          break;\n\n        case directions.RIGHT:\n          orbitControls.panXY(-panSpeed, 0);\n          break;\n\n        default:\n          break;\n      }\n    }\n\n    function zoomIn(e) {\n      e.preventDefault();\n      orbitControls.dollyIn(1.1);\n      orbitControls.update();\n    }\n\n    function zoomOut(e) {\n      // eslint-disable-next-line no-unused-expressions\n      e.preventDefault;\n      orbitControls.dollyOut(1.1);\n      orbitControls.update();\n    }\n\n    init();\n    this.setState({\n      blueprint3d: blueprint3d\n    });\n  }\n  /*\n   * Context menu for selected item\n   */\n\n\n  contextMenu(blueprint3d) {\n    // var scope = this;\n    var selectedItem;\n    var three = blueprint3d.three;\n\n    function init() {\n      $(\"#context-menu-delete\").click(function (event) {\n        selectedItem.remove();\n      });\n      $(\"#context-menu-delete\").on(\"touchend\", function (event) {\n        selectedItem.remove();\n      });\n      three.itemSelectedCallbacks.add(itemSelected);\n      three.itemUnselectedCallbacks.add(itemUnselected);\n      initResize();\n      $(\"#fixed\").click(function () {\n        var checked = $(this).prop(\"checked\");\n        selectedItem.setFixed(checked);\n      });\n    }\n\n    function cmToIn(cm) {\n      return cm / 2.54;\n    }\n\n    function inToCm(inches) {\n      return inches * 2.54;\n    }\n\n    function itemSelected(item) {\n      selectedItem = item;\n      $(\"#context-menu-name\").text(item.metadata.itemName);\n      $(\"#item-width\").val(cmToIn(selectedItem.getWidth()).toFixed(0));\n      $(\"#item-height\").val(cmToIn(selectedItem.getHeight()).toFixed(0));\n      $(\"#item-depth\").val(cmToIn(selectedItem.getDepth()).toFixed(0));\n      $(\"#item-elevation\").val(cmToIn(selectedItem.getElevation()).toFixed(0));\n      $(\"texture-context-container\").show();\n      $(\"#context-menu\").show();\n\n      if (selectedItem.isElevationAdjustable()) {\n        $(\"#item-elevation-div\").show();\n      } else {\n        $(\"#item-elevation-div\").hide();\n      }\n\n      $(\"#fixed\").prop(\"checked\", item.fixed);\n    }\n\n    function resize() {\n      selectedItem.resize(inToCm($(\"#item-height\").val()), inToCm($(\"#item-width\").val()), inToCm($(\"#item-depth\").val()));\n    }\n\n    function elevate() {\n      selectedItem.elevate(inToCm($(\"#item-elevation\").val()));\n    }\n\n    function initResize() {\n      $(\"#item-height\").change(resize);\n      $(\"#item-width\").change(resize);\n      $(\"#item-depth\").change(resize);\n      $(\"#item-elevation\").change(elevate);\n    }\n\n    function itemUnselected() {\n      selectedItem = null;\n      $(\"texture-context-container\").hide();\n      $(\"#context-menu\").hide();\n    }\n\n    init();\n    this.setState({\n      blueprint3d: blueprint3d\n    });\n  }\n  /*\n   * Loading modal for items\n   */\n\n\n  modalEffects(blueprint3d) {\n    // var scope = this;\n    var itemsLoading = 0;\n\n    this.setActiveItem = function (active) {\n      // eslint-disable-next-line no-undef\n      itemSelected = active;\n      update();\n    };\n\n    function update() {\n      if (itemsLoading > 0) {\n        $(\"#loading-modal\").show();\n      } else {\n        $(\"#loading-modal\").hide();\n      }\n    }\n\n    function init() {\n      blueprint3d.model.scene.itemLoadingCallbacks.add(function () {\n        itemsLoading += 1;\n        update();\n      });\n      blueprint3d.model.scene.itemLoadedCallbacks.add(function () {\n        itemsLoading -= 1;\n        update();\n      });\n      update();\n    }\n\n    init();\n    this.setState({\n      blueprint3d: blueprint3d\n    });\n  }\n  /*\n   * Side menu\n   */\n\n\n  initItems(blueprint3d, setCurrentState) {\n    $(\"#add-items\").find(\".add-item\").off(\"click\");\n    $(\"#add-items\").find(\".add-item\").click(function (e) {\n      var modelUrl = $(this).attr(\"model-url\");\n      var itemType = parseInt($(this).attr(\"model-type\"));\n      var metadata = {\n        itemName: $(this).attr(\"model-name\"),\n        resizable: true,\n        modelUrl: modelUrl,\n        itemType: itemType\n      };\n      blueprint3d.model.scene.addItem(itemType, modelUrl, metadata);\n      setCurrentState({\n        div: $(\"#viewer\"),\n        tab: $(\"#design_tab\"),\n        name: \"Design\"\n      }, false);\n    });\n  }\n  /*\n   * Change floor and wall textures\n   */\n\n\n  textureSelector(blueprint3d, sideMenu) {\n    // var scope = this;\n    var three = blueprint3d.three; // var isAdmin = isAdmin;\n\n    var currentTarget = null;\n\n    function initTextureSelectors() {\n      $(\".texture-select-thumbnail\").off(\"click\");\n      $(\".texture-select-thumbnail\").click(function (e) {\n        var textureUrl = $(this).attr(\"texture-url\");\n        var textureStretch = $(this).attr(\"texture-stretch\") === \"true\";\n        var textureScale = parseInt($(this).attr(\"texture-scale\"));\n        currentTarget.setTexture(textureUrl, textureStretch, textureScale);\n        e.preventDefault();\n      });\n    }\n\n    function init() {\n      three.wallClicked.add(wallClicked);\n      three.wallClicked.add(initTextureSelectors);\n      three.floorClicked.add(floorClicked);\n      three.wallClicked.add(initTextureSelectors);\n      three.itemSelectedCallbacks.add(reset);\n      three.wallClicked.add(initTextureSelectors);\n      three.nothingClicked.add(reset);\n      three.wallClicked.add(initTextureSelectors); // sideMenu.stateChangeCallbacks.add(reset);\n\n      three.wallClicked.add(initTextureSelectors);\n      initTextureSelectors();\n    }\n\n    function wallClicked(halfEdge) {\n      if (currentTarget !== undefined && currentTarget !== null) {\n        currentTarget.removeOutline();\n      }\n\n      currentTarget = halfEdge;\n      currentTarget.drawOutline();\n      $(\"#floorTexturesDiv\").hide();\n      $(\"texture-context-container\").show();\n      $(\"#wallTextures\").show();\n      initTextureSelectors();\n    }\n\n    function floorClicked(room) {\n      if (currentTarget !== undefined && currentTarget !== null) {\n        currentTarget.removeOutline();\n      }\n\n      currentTarget = room;\n      currentTarget.drawOutline();\n      $(\"#wallTextures\").hide();\n      $(\"texture-context-container\").show();\n      $(\"#floorTexturesDiv\").show();\n      initTextureSelectors();\n    }\n\n    function reset() {\n      if (currentTarget !== undefined && currentTarget !== null) {\n        currentTarget.removeOutline();\n      }\n\n      $(\"texture-context-container\").hide();\n      $(\"#wallTextures\").hide();\n      $(\"#floorTexturesDiv\").hide();\n      initTextureSelectors();\n    }\n\n    init();\n  }\n\n  handleLogoutShow(e) {\n    e.preventDefault();\n    this.props.store.cambiarModuloLogout(true);\n  }\n\n  handleLogoutShow(e) {\n    e.preventDefault();\n    this.props.store.cambiarModuloLogout(true);\n  }\n\n  async engine(viewKey) {\n    /*\n     * Floorplanner controls\n     */\n    var ViewerFloorplanner = function (blueprint3d) {\n      var canvasWrapper = \"#floorplanner\"; // buttons\n\n      var move = \"#move\";\n      var remove = \"#delete\";\n      var draw = \"#draw\";\n      var activeStlye = \"btn-primary disabled\";\n      this.floorplanner = blueprint3d.floorplanner;\n      var scope = this;\n\n      function init() {\n        $(window).resize(scope.handleWindowResize);\n        scope.handleWindowResize(); // mode buttons\n\n        scope.floorplanner.modeResetCallbacks.add(function (mode) {\n          $(draw).removeClass(activeStlye);\n          $(remove).removeClass(activeStlye);\n          $(move).removeClass(activeStlye);\n\n          if (mode === BP3D.Floorplanner.floorplannerModes.MOVE) {\n            $(move).addClass(activeStlye);\n          } else if (mode === BP3D.Floorplanner.floorplannerModes.DRAW) {\n            $(draw).addClass(activeStlye);\n          } else if (mode === BP3D.Floorplanner.floorplannerModes.DELETE) {\n            $(remove).addClass(activeStlye);\n          }\n\n          if (mode === BP3D.Floorplanner.floorplannerModes.DRAW) {\n            $(\"#draw-walls-hint\").show();\n            scope.handleWindowResize();\n          } else {\n            $(\"#draw-walls-hint\").hide();\n          }\n        });\n        $(move).click(function () {\n          scope.floorplanner.setMode(BP3D.Floorplanner.floorplannerModes.MOVE);\n        }); // $(move).on(\"touchend\", function () {\n        //   scope.floorplanner.setMode(BP3D.Floorplanner.floorplannerModes.MOVE);\n        // });\n\n        $(draw).click(function () {\n          scope.floorplanner.setMode(BP3D.Floorplanner.floorplannerModes.DRAW);\n        }); // $(draw).on(\"touchend\", function () {\n        //   scope.floorplanner.setMode(BP3D.Floorplanner.floorplannerModes.DRAW);\n        // });\n\n        $(remove).click(function () {\n          scope.floorplanner.setMode(BP3D.Floorplanner.floorplannerModes.DELETE);\n        }); // $(remove).on(\"touchend\", function () {\n        //   scope.floorplanner.setMode(\n        //     BP3D.Floorplanner.floorplannerModes.DELETE\n        //   );\n        // });\n      }\n\n      this.updateFloorplanView = function () {\n        scope.floorplanner.reset();\n      };\n\n      this.handleWindowResize = function () {\n        $(canvasWrapper).height(window.innerHeight - $(canvasWrapper).offset().top);\n        scope.floorplanner.resizeView();\n      };\n\n      init();\n    };\n\n    var mainControls = function (blueprint3d) {\n      function newDesign() {\n        blueprint3d.model.loadSerialized(NEW_STRUCTURE);\n      } // var loadDesign = async (event) => {\n      //   let name = $(\"#loadFile\").attr('name');\n      //   let file1 = await axios.get(\n      //     \"http://localhost:8001/assets/\" + name\n      //   );\n      //   // var file1 = event.target.files[0];\n      //   var reader = new FileReader();\n      //   reader.onload = function () {\n      //     var data = reader.result;\n      //     blueprint3d.model.loadSerialized(data);\n      //   };\n      //   reader.readAsText(file1);\n      //   $(\"#loadFile\").replaceWith($(\"#loadFile\").val(\"\").clone(true));\n      //   try {\n      //     let uri = $(\"#loadFile\").attr(\"uri\");\n      //     console.log(\"uri: \" + uri);\n      //     if (uri !== \"\") {\n      //       let res = await axios.get(\"http://localhost:8001/assets/\" + uri);\n      //       blueprint3d.model.loadSerialized(JSON.stringify(res.data));\n      //     }\n      //   } catch (e) {\n      //     console.log(e);\n      //   }\n      // };\n      // function saveDesign() {\n      //   var data = blueprint3d.model.exportSerialized();\n      //   var a = window.document.createElement(\"a\");\n      //   var blob = new Blob([data], {\n      //     type: \"text\",\n      //   });\n      //   // setBlob(blob);\n      //   a.href = window.URL.createObjectURL(blob);\n      //   a.download = \"design\";\n      //   document.body.appendChild(a);\n      //   a.click();\n      //   document.body.removeChild(a);\n      // }\n      // function setBlob(blob) {\n      //   setNewBlob(blob);\n      // }\n\n\n      function init() {\n        $(\"#new\").click(newDesign); // $(\"#new\").on(\"touchend\", newDesign);\n        // $(\"#loadFile\").click(loadDesign);\n        // $(\"#loadFileLabel\").on(\"touchend\", function () {\n        //   $(\"#loadFile\").trigger(\"click\");\n        // });\n        // $(\"#saveFile\").click(saveDesign);\n        // $(\"#saveFile\").on(\"touchend\", saveDesign);\n      }\n\n      init();\n    };\n    /*\n     * Initialize!\n     */\n\n\n    var modalEffects = this.modalEffects(this.state.blueprint3d);\n    var viewerFloorplanner = new ViewerFloorplanner(this.state.blueprint3d); // eslint-disable-next-line no-unused-vars\n\n    var contextMenu = this.contextMenu(this.state.blueprint3d);\n    var sideMenu = this.sideMenu(this.state.blueprint3d, viewerFloorplanner, modalEffects); // eslint-disable-next-line no-unused-vars\n\n    var textureSelector = this.textureSelector(this.state.blueprint3d, sideMenu); // eslint-disable-next-line no-unused-vars\n\n    var cameraButtons = this.cameraButtons(this.state.blueprint3d);\n    mainControls(this.state.blueprint3d); // This serialization format needs work\n    // Load a simple rectangle room\n\n    if (viewKey === \"\") {\n      this.state.blueprint3d.model.loadSerialized(INIT_STRUCTURE);\n    } else {\n      try {\n        let res = await axios.get(BASE_URL + ASSETS + viewKey); // let file1 = new Blob(res)\n        // var blueprint3d = this.state.blueprint3d;\n        // var reader = new FileReader();\n        //   reader.onload = function () {\n        //     var data = reader.result;\n        //     blueprint3d.model.loadSerialized(data);\n        //   };\n        //   reader.readAsText(file1);\n\n        this.state.blueprint3d.model.loadSerialized(JSON.stringify(res.data));\n      } catch (e) {\n        console.log(e);\n        this.state.blueprint3d.model.loadSerialized(INIT_STRUCTURE);\n      }\n    }\n  }\n\n  componentDidMount() {\n    // const { store } = this.props;\n    var opts = {\n      floorplannerElement: \"floorplanner-canvas\",\n      threeElement: \"#viewer\",\n      threeCanvasElement: \"three-canvas\",\n      textureDir: \"rooms/textures/\",\n      widget: false\n    };\n    this.setState({\n      blueprint3d: new BP3D.Blueprint3d(opts)\n    }, () => {\n      if (this.props.viewKey !== undefined && this.props.viewKey !== null && this.props.viewKey !== \"\") {\n        this.engine(this.props.viewKey);\n      } else {\n        this.engine(\"\");\n      }\n    });\n  }\n\n  setDesignState(newState, firstTime) {\n    firstTime = firstTime || false;\n    var ACTIVE_CLASS = \"active\";\n    $(\"#items_tab\").removeClass(ACTIVE_CLASS);\n    $(\"#design_tab\").addClass(ACTIVE_CLASS); // show and hide the right divs\n\n    $(\"#add-items\").hide();\n    $(\"#viewer\").show();\n    this.state.blueprint3d.three.updateWindowSize(); // set new state\n\n    function handleWindowResize() {// $(\".sidebar\").height(window.innerHeight);\n      // $(\"#add-items\").height(window.innerHeight);\n    }\n\n    handleWindowResize();\n\n    function reset() {\n      $(\"texture-context-container\").hide();\n      $(\"#wallTextures\").hide();\n      $(\"#floorTexturesDiv\").hide();\n    }\n\n    reset();\n    this.setState({\n      currentStateName: \"Design\"\n    }); //change mobx state-active-tab\n  }\n\n  componentDidUpdate(prevProps, prevState, snapShot) {\n    if (this.props.añadirManejadorDeClick) {\n      // this.setState({ añadirManejadorDeClick: true });\n      this.props.store.cambiarManejadorDeClick(false);\n      this.initItems(this.state.blueprint3d, this.setDesignState);\n    }\n\n    if (this.props.añadirManejadorDeClick === false && prevProps.añadirManejadorDeClick) {\n      this.setState({\n        añadirManejadorDeClick: false\n      });\n    }\n  }\n\n  render() {\n    const {\n      store\n    } = this.props;\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: \"horizontal-container\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 876,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      id: \"texture-context-container\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 880,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      id: \"context-menu\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 882,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(ContextMenu, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 883,\n        columnNumber: 13\n      }\n    })), /*#__PURE__*/React.createElement(\"div\", {\n      id: \"floorTexturesDiv\",\n      style: {\n        display: \"none\"\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 886,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(FloorTextureList, {\n      usuarioHaIniciadoSesion: store.obtenerInicioDeSesion,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 887,\n        columnNumber: 13\n      }\n    })), /*#__PURE__*/React.createElement(\"div\", {\n      id: \"wallTextures\",\n      style: {\n        display: \"none\"\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 891,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(WallTextureList, {\n      usuarioHaIniciadoSesion: store.obtenerInicioDeSesion,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 892,\n        columnNumber: 13\n      }\n    }))), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"right-container\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 898,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      id: \"viewer\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 900,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      id: \"loading-modal\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 963,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"h1\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 964,\n        columnNumber: 15\n      }\n    }, \"Loading...\"))), /*#__PURE__*/React.createElement(\"div\", {\n      id: \"floorplanner\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 970,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(\"canvas\", {\n      id: \"floorplanner-canvas\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 971,\n        columnNumber: 13\n      }\n    }), /*#__PURE__*/React.createElement(\"div\", {\n      id: \"floorplanner-controls\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 972,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(Button, {\n      variant: \"info\",\n      size: \"sm\",\n      className: \"icon-text-button\",\n      id: \"update-floorplan\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 1007,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(\"span\", {\n      className: \"text-centre\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 1013,\n        columnNumber: 17\n      }\n    }, \"Listo\"), /*#__PURE__*/React.createElement(\"span\", {\n      className: \"icon-centre\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 1014,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(FaChevronRight, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 1015,\n        columnNumber: 19\n      }\n    })))), /*#__PURE__*/React.createElement(\"div\", {\n      id: \"draw-walls-hint\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 1019,\n        columnNumber: 13\n      }\n    }, \"Press the \\\"Esc\\\" key to stop drawing walls\")), /*#__PURE__*/React.createElement(\"div\", {\n      id: \"add-items\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 1024,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(Tabs, {\n      variant: \"pills\",\n      style: {\n        display: 'flex',\n        flexDirection: 'column',\n        width: '100px',\n        position: 'absolute',\n        right: '100px',\n        top: '100px'\n      },\n      id: \"controlled-tab-example\",\n      activeKey: this.state.key,\n      onSelect: k => {\n        this.setState({\n          key: k\n        });\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 1025,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(Tab, {\n      eventKey: \"chair\",\n      title: \"Sillas\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 1037,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(CardListChair, {\n      usuarioHaIniciadoSesion: store.obtenerInicioDeSesion,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 1038,\n        columnNumber: 17\n      }\n    })), /*#__PURE__*/React.createElement(Tab, {\n      eventKey: \"rug\",\n      title: \"Alfombras\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 1040,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(CardListRug, {\n      usuarioHaIniciadoSesion: store.obtenerInicioDeSesion,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 1041,\n        columnNumber: 17\n      }\n    })), /*#__PURE__*/React.createElement(Tab, {\n      eventKey: \"misc\",\n      title: \"Miscelaneos\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 1043,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(CardListMisc, {\n      usuarioHaIniciadoSesion: store.obtenerInicioDeSesion,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 1044,\n        columnNumber: 17\n      }\n    })), /*#__PURE__*/React.createElement(Tab, {\n      eventKey: \"light\",\n      title: \"Luces\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 1046,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(CardListLight, {\n      usuarioHaIniciadoSesion: store.obtenerInicioDeSesion,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 1047,\n        columnNumber: 17\n      }\n    })))), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"menu\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 1057,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      display: \"flex\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 1058,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"ul\", {\n      className: \"nav nav-sidebar\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 1059,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(\"li\", {\n      id: \"design_tab\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 1060,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(OverlayTrigger, {\n      placement: \"right\",\n      overlay: /*#__PURE__*/React.createElement(Tooltip, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 1063,\n          columnNumber: 30\n        }\n      }, \"Dise\\xF1ar\"),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 1061,\n        columnNumber: 19\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"icons\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 1065,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"iconWrapper\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 1066,\n        columnNumber: 23\n      }\n    }, /*#__PURE__*/React.createElement(FaCube, {\n      size: \"25px\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 1067,\n        columnNumber: 25\n      }\n    }))))), /*#__PURE__*/React.createElement(\"li\", {\n      id: \"floorplan_tab\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 1072,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(OverlayTrigger, {\n      placement: \"right\",\n      overlay: /*#__PURE__*/React.createElement(Tooltip, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 1075,\n          columnNumber: 30\n        }\n      }, \"Editar piso\"),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 1073,\n        columnNumber: 19\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"icons\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 1077,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"iconWrapper\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 1078,\n        columnNumber: 23\n      }\n    }, /*#__PURE__*/React.createElement(FaPenFancy, {\n      size: \"25px\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 1079,\n        columnNumber: 25\n      }\n    }))))), /*#__PURE__*/React.createElement(\"li\", {\n      id: \"items_tab\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 1084,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(OverlayTrigger, {\n      placement: \"right\",\n      overlay: /*#__PURE__*/React.createElement(Tooltip, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 1087,\n          columnNumber: 30\n        }\n      }, \"A\\xF1adir objeto\"),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 1085,\n        columnNumber: 19\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"icons\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 1089,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"iconWrapper\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 1090,\n        columnNumber: 23\n      }\n    }, /*#__PURE__*/React.createElement(FaPlus, {\n      size: \"25px\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 1091,\n        columnNumber: 25\n      }\n    }))))), /*#__PURE__*/React.createElement(\"li\", {\n      id: \"items_tab\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 1096,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"img\", {\n      src: \"./logo.png\",\n      className: \"top-bar-logo\",\n      alt: \"\",\n      style: {\n        width: '50px',\n        height: '50px',\n        margin: '15px 10px 0 10px'\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 1097,\n        columnNumber: 19\n      }\n    })), /*#__PURE__*/React.createElement(\"li\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 1099,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(OverlayTrigger, {\n      placement: \"right\",\n      overlay: /*#__PURE__*/React.createElement(Tooltip, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 1102,\n          columnNumber: 30\n        }\n      }, \"Nuevo plano\"),\n      onClick: () => this.store.cambiarModuloRepetir(true),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 1100,\n        columnNumber: 19\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"icons\",\n      id: \"new\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 1105,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"iconWrapper\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 1106,\n        columnNumber: 23\n      }\n    }, /*#__PURE__*/React.createElement(FaRedo, {\n      size: \"25px\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 1107,\n        columnNumber: 25\n      }\n    }))))), /*#__PURE__*/React.createElement(\"li\", {\n      id: \"design_tab\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 1112,\n        columnNumber: 18\n      }\n    }, /*#__PURE__*/React.createElement(OverlayTrigger, {\n      placement: \"right\",\n      overlay: /*#__PURE__*/React.createElement(Tooltip, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 1115,\n          columnNumber: 30\n        }\n      }, \"Capturar\"),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 1113,\n        columnNumber: 19\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"icons\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 1117,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"iconWrapper\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 1118,\n        columnNumber: 23\n      }\n    }, /*#__PURE__*/React.createElement(FaCamera, {\n      size: \"25px\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 1119,\n        columnNumber: 25\n      }\n    }))))), /*#__PURE__*/React.createElement(\"li\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 1124,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(Button, {\n      variant: \"outline-dark\",\n      className: \"top-bar-login-button\",\n      style: {\n        position: 'absolute',\n        top: '10px',\n        right: 0\n      },\n      onClick: this.handleLogoutShow,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 1125,\n        columnNumber: 19\n      }\n    }, \"Salir\")))))));\n  }\n\n}, _temp)) || _class) || _class);\nexport default BlueprintPage;","map":{"version":3,"sources":["/home/javier/work/urbe/Feldspar-master/src/Components/BlueprintPage.jsx"],"names":["React","Component","$","axios","BP3D","INIT_STRUCTURE","NEW_STRUCTURE","BASE_URL","ASSETS","TopBarButton","Button","FaSearchMinus","FaSearchPlus","FaHome","FaArrowUp","FaArrowDown","FaArrowLeft","FaArrowRight","FaChevronRight","FaArrowsAlt","FaPencilAlt","FaTrashAlt","FaPencilRuler","FaDraftingCompass","FaPlus","FaRedo","FaCamera","FaPenFancy","FaCube","Tabs","Tab","OverlayTrigger","Tooltip","CardListSofa","CardListChair","CardListRug","CardListMisc","CardListKitchen","CardListArch","CardListLight","FloorTextureList","WallTextureList","ContextMenu","SaveButton","LoadButton","SaveModal","LoadModal","inject","observer","BlueprintPage","constructor","props","sideMenu","blueprint3d","floorplanControls","modalEffects","ACTIVE_CLASS","tabs","FLOORPLAN","SHOP","DESIGN","stateChangeCallbacks","Callbacks","states","DEFAULT","div","tab","name","currentState","init","elem","click","tabClicked","floorplanUpdate","reset","hide","add","initLeftMenu","three","updateWindowSize","handleWindowResize","initItems","setCurrentState","stopSpin","key","state","getCurrentState","currentStateName","updateState","newState","setState","firstTime","removeClass","addClass","getController","setSelectedObject","show","updateFloorplanView","model","floorplan","update","fire","window","resize","añadirManejadorDeClick","blob","engine","bind","setDesignState","cameraButtons","contextMenu","textureSelector","saveFile","loadFile","handleLogoutShow","undefined","data","exportSerialized","Blob","type","uri","res","get","loadSerialized","JSON","stringify","console","log","e","orbitControls","controls","panSpeed","directions","UP","DOWN","LEFT","RIGHT","zoomIn","on","zoomOut","dblclick","preventDefault","centerCamera","pan","stopPropagation","direction","panXY","dollyIn","dollyOut","selectedItem","event","remove","itemSelectedCallbacks","itemSelected","itemUnselectedCallbacks","itemUnselected","initResize","checked","prop","setFixed","cmToIn","cm","inToCm","inches","item","text","metadata","itemName","val","getWidth","toFixed","getHeight","getDepth","getElevation","isElevationAdjustable","fixed","elevate","change","itemsLoading","setActiveItem","active","scene","itemLoadingCallbacks","itemLoadedCallbacks","find","off","modelUrl","attr","itemType","parseInt","resizable","addItem","currentTarget","initTextureSelectors","textureUrl","textureStretch","textureScale","setTexture","wallClicked","floorClicked","nothingClicked","halfEdge","removeOutline","drawOutline","room","store","cambiarModuloLogout","viewKey","ViewerFloorplanner","canvasWrapper","move","draw","activeStlye","floorplanner","scope","modeResetCallbacks","mode","Floorplanner","floorplannerModes","MOVE","DRAW","DELETE","setMode","height","innerHeight","offset","top","resizeView","mainControls","newDesign","viewerFloorplanner","componentDidMount","opts","floorplannerElement","threeElement","threeCanvasElement","textureDir","widget","Blueprint3d","componentDidUpdate","prevProps","prevState","snapShot","cambiarManejadorDeClick","render","display","obtenerInicioDeSesion","flexDirection","width","position","right","k","margin","cambiarModuloRepetir"],"mappings":"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","sourcesContent":["import \"../App.css\";\nimport React, { Component } from \"react\";\nimport $ from \"jquery\";\nimport axios from \"axios\";\nimport { BP3D } from \"../engine/blueprint3d.js\";\nimport { INIT_STRUCTURE, NEW_STRUCTURE } from \"../Structures.js\";\nimport { BASE_URL, ASSETS } from \"../Constants.js\";\nimport TopBarButton from \"./TopBar/TopBarButton.jsx\";\nimport Button from \"react-bootstrap/Button\";\nimport {\n  FaSearchMinus,\n  FaSearchPlus,\n  FaHome,\n  FaArrowUp,\n  FaArrowDown,\n  FaArrowLeft,\n  FaArrowRight,\n  FaChevronRight,\n  FaArrowsAlt,\n  FaPencilAlt,\n  FaTrashAlt,\n  FaPencilRuler,\n  FaDraftingCompass,\n  FaPlus,\n  FaRedo,\n  FaCamera,\n  FaPenFancy,\n  FaCube,\n} from \"react-icons/fa\";\nimport { Tabs, Tab, OverlayTrigger, Tooltip } from \"react-bootstrap\";\nimport CardListSofa from \"./AddItems/CardListSofa.jsx\";\nimport CardListChair from \"./AddItems/CardListChair.jsx\";\nimport CardListRug from \"./AddItems/CardListRug.jsx\";\nimport CardListMisc from \"./AddItems/CardListMisc.jsx\";\nimport CardListKitchen from \"./AddItems/CardListKitchen.jsx\";\nimport CardListArch from \"./AddItems/CardListArch.jsx\";\nimport CardListLight from \"./AddItems/CardListLight.jsx\";\nimport FloorTextureList from \"./TextureList/FloorTextureList.jsx\";\nimport WallTextureList from \"./TextureList/WallTextureList.jsx\";\nimport ContextMenu from \"./ContextMenu.jsx\";\nimport SaveButton from \"./SaveLoadModal/SaveFile/SaveButton.jsx\";\nimport LoadButton from \"./SaveLoadModal/LoadFile/LoadButton.jsx\";\nimport SaveModal from \"./SaveLoadModal/SaveFile/SaveModal.jsx\";\nimport LoadModal from \"./SaveLoadModal/LoadFile/LoadModal.jsx\";\n\nimport { inject, observer } from \"mobx-react\";\n\n@inject(\"store\")\n@observer\nclass BlueprintPage extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      key: \"chair\",\n      blueprint3d: {},\n      añadirManejadorDeClick: false,\n      currentStateName: \"Design\",\n      blob: \"\",\n    };\n    this.engine = this.engine.bind(this);\n    this.setDesignState = this.setDesignState.bind(this);\n    this.cameraButtons = this.cameraButtons.bind(this);\n    this.contextMenu = this.contextMenu.bind(this);\n    this.modalEffects = this.modalEffects.bind(this);\n    this.sideMenu = this.sideMenu.bind(this);\n    this.textureSelector = this.textureSelector.bind(this);\n    this.initItems = this.initItems.bind(this);\n    this.saveFile = this.saveFile.bind(this);\n    this.loadFile = this.loadFile.bind(this);\n    this.handleLogoutShow = this.handleLogoutShow.bind(this);\n  }\n\n  saveFile() {\n    if (this.state.blueprint3d.model !== undefined) {\n      var data = this.state.blueprint3d.model.exportSerialized();\n      // var a = window.document.createElement(\"a\");\n      var blob = new Blob([data], {\n        type: \"text\",\n      });\n      this.setState({ blob: blob });\n      // a.href = window.URL.createObjectURL(blob);\n      // a.download = \"design.blueprint3d\";\n      // document.body.appendChild(a);\n      // a.click();\n      // document.body.removeChild(a);\n    }\n  }\n\n  async loadFile(uri) {\n    try {\n      // console.log(\"uri: \" + uri);\n      if (uri !== null && uri !== \"\") {\n        let res = await axios.get(BASE_URL + ASSETS + uri);\n        this.state.blueprint3d.model.loadSerialized(JSON.stringify(res.data));\n      } else {\n        console.log(\"uri is null\");\n      }\n    } catch (e) {\n      console.log(e);\n    }\n  }\n\n  /*\n   * Camera Buttons\n   */\n  cameraButtons(blueprint3d) {\n    var orbitControls = blueprint3d.three.controls;\n    var three = blueprint3d.three;\n\n    var panSpeed = 30;\n    var directions = {\n      UP: 1,\n      DOWN: 2,\n      LEFT: 3,\n      RIGHT: 4,\n    };\n\n    function init() {\n      // Camera controls\n      $(\"#zoom-in\").click(zoomIn);\n      $(\"#zoom-in\").on(\"touchend\", zoomIn);\n      $(\"#zoom-out\").click(zoomOut);\n      $(\"#zoom-out\").on(\"touchend\", zoomOut);\n\n      $(\"#zoom-in\").dblclick(preventDefault);\n      $(\"#zoom-out\").dblclick(preventDefault);\n\n      $(\"#reset-view\").click(three.centerCamera);\n      $(\"#reset-view\").on(\"touchend\", three.centerCamera);\n\n      $(\"#move-left\").click(function () {\n        pan(directions.LEFT);\n      });\n      $(\"#move-left\").on(\"touchend\", function () {\n        pan(directions.LEFT);\n      });\n\n      $(\"#move-right\").click(function () {\n        pan(directions.RIGHT);\n      });\n      $(\"#move-right\").on(\"touchend\", function () {\n        pan(directions.RIGHT);\n      });\n\n      $(\"#move-up\").click(function () {\n        pan(directions.UP);\n      });\n      $(\"#move-up\").on(\"touchend\", function () {\n        pan(directions.UP);\n      });\n\n      $(\"#move-down\").click(function () {\n        pan(directions.DOWN);\n      });\n      $(\"#move-down\").on(\"touchend\", function () {\n        pan(directions.DOWN);\n      });\n\n      $(\"#move-left\").dblclick(preventDefault);\n      $(\"#move-right\").dblclick(preventDefault);\n      $(\"#move-up\").dblclick(preventDefault);\n      $(\"#move-down\").dblclick(preventDefault);\n    }\n\n    function preventDefault(e) {\n      e.preventDefault();\n      e.stopPropagation();\n    }\n\n    function pan(direction) {\n      switch (direction) {\n        case directions.UP:\n          orbitControls.panXY(0, panSpeed);\n          break;\n        case directions.DOWN:\n          orbitControls.panXY(0, -panSpeed);\n          break;\n        case directions.LEFT:\n          orbitControls.panXY(panSpeed, 0);\n          break;\n        case directions.RIGHT:\n          orbitControls.panXY(-panSpeed, 0);\n          break;\n        default:\n          break;\n      }\n    }\n\n    function zoomIn(e) {\n      e.preventDefault();\n      orbitControls.dollyIn(1.1);\n      orbitControls.update();\n    }\n\n    function zoomOut(e) {\n      // eslint-disable-next-line no-unused-expressions\n      e.preventDefault;\n      orbitControls.dollyOut(1.1);\n      orbitControls.update();\n    }\n\n    init();\n    this.setState({ blueprint3d: blueprint3d });\n  }\n\n  /*\n   * Context menu for selected item\n   */\n  contextMenu(blueprint3d) {\n    // var scope = this;\n    var selectedItem;\n    var three = blueprint3d.three;\n\n    function init() {\n      $(\"#context-menu-delete\").click(function (event) {\n        selectedItem.remove();\n      });\n      $(\"#context-menu-delete\").on(\"touchend\", function (event) {\n        selectedItem.remove();\n      });\n\n      three.itemSelectedCallbacks.add(itemSelected);\n      three.itemUnselectedCallbacks.add(itemUnselected);\n\n      initResize();\n\n      $(\"#fixed\").click(function () {\n        var checked = $(this).prop(\"checked\");\n        selectedItem.setFixed(checked);\n      });\n    }\n\n    function cmToIn(cm) {\n      return cm / 2.54;\n    }\n\n    function inToCm(inches) {\n      return inches * 2.54;\n    }\n\n    function itemSelected(item) {\n      selectedItem = item;\n\n      $(\"#context-menu-name\").text(item.metadata.itemName);\n\n      $(\"#item-width\").val(cmToIn(selectedItem.getWidth()).toFixed(0));\n      $(\"#item-height\").val(cmToIn(selectedItem.getHeight()).toFixed(0));\n      $(\"#item-depth\").val(cmToIn(selectedItem.getDepth()).toFixed(0));\n      $(\"#item-elevation\").val(cmToIn(selectedItem.getElevation()).toFixed(0));\n\n      $(\"texture-context-container\").show();\n      $(\"#context-menu\").show();\n\n      if (selectedItem.isElevationAdjustable()) {\n        $(\"#item-elevation-div\").show();\n      } else {\n        $(\"#item-elevation-div\").hide();\n      }\n\n      $(\"#fixed\").prop(\"checked\", item.fixed);\n    }\n\n    function resize() {\n      selectedItem.resize(\n        inToCm($(\"#item-height\").val()),\n        inToCm($(\"#item-width\").val()),\n        inToCm($(\"#item-depth\").val())\n      );\n    }\n\n    function elevate() {\n      selectedItem.elevate(inToCm($(\"#item-elevation\").val()));\n    }\n\n    function initResize() {\n      $(\"#item-height\").change(resize);\n      $(\"#item-width\").change(resize);\n      $(\"#item-depth\").change(resize);\n      $(\"#item-elevation\").change(elevate);\n    }\n\n    function itemUnselected() {\n      selectedItem = null;\n      $(\"texture-context-container\").hide();\n      $(\"#context-menu\").hide();\n    }\n\n    init();\n    this.setState({ blueprint3d: blueprint3d });\n  }\n\n  /*\n   * Loading modal for items\n   */\n  modalEffects(blueprint3d) {\n    // var scope = this;\n    var itemsLoading = 0;\n\n    this.setActiveItem = function (active) {\n      // eslint-disable-next-line no-undef\n      itemSelected = active;\n      update();\n    };\n\n    function update() {\n      if (itemsLoading > 0) {\n        $(\"#loading-modal\").show();\n      } else {\n        $(\"#loading-modal\").hide();\n      }\n    }\n\n    function init() {\n      blueprint3d.model.scene.itemLoadingCallbacks.add(function () {\n        itemsLoading += 1;\n        update();\n      });\n\n      blueprint3d.model.scene.itemLoadedCallbacks.add(function () {\n        itemsLoading -= 1;\n        update();\n      });\n\n      update();\n    }\n\n    init();\n    this.setState({ blueprint3d: blueprint3d });\n  }\n\n  /*\n   * Side menu\n   */\n  sideMenu = function (blueprint3d, floorplanControls, modalEffects) {\n    // var modalEffects = modalEffectsArg;\n\n    var ACTIVE_CLASS = \"active\";\n\n    var tabs = {\n      FLOORPLAN: $(\"#floorplan_tab\"),\n      SHOP: $(\"#items_tab\"),\n      DESIGN: $(\"#design_tab\"),\n    };\n\n    // var scope = this;\n    var stateChangeCallbacks = $.Callbacks();\n\n    var states = {\n      DEFAULT: {\n        div: $(\"#viewer\"),\n        tab: tabs.DESIGN,\n        name: \"Design\",\n      },\n      FLOORPLAN: {\n        div: $(\"#floorplanner\"),\n        tab: tabs.FLOORPLAN,\n        name: \"Floorplan\",\n      },\n      SHOP: {\n        div: $(\"#add-items\"),\n        tab: tabs.SHOP,\n        name: \"Shop\",\n      },\n    };\n\n    // sidebar state\n    var currentState = states.FLOORPLAN;\n\n    function init() {\n      for (var tab in tabs) {\n        var elem = tabs[tab];\n        elem.click(tabClicked(elem));\n      }\n\n      $(\"#update-floorplan\").click(floorplanUpdate);\n      function reset() {\n        $(\"texture-context-container\").hide();\n        $(\"#wallTextures\").hide();\n        $(\"#floorTexturesDiv\").hide();\n      }\n      stateChangeCallbacks.add(reset);\n\n      initLeftMenu();\n\n      blueprint3d.three.updateWindowSize();\n      handleWindowResize();\n\n      initItems();\n\n      setCurrentState(states.DEFAULT, true);\n    }\n\n    function floorplanUpdate() {\n      setCurrentState(states.DEFAULT);\n    }\n\n    function tabClicked(tab) {\n      return function () {\n        // Stop three from spinning\n        initItems();\n        blueprint3d.three.stopSpin();\n\n        // Selected a new tab\n        for (var key in states) {\n          var state = states[key];\n          if (state.tab === tab) {\n            setCurrentState(state);\n            break;\n          }\n        }\n      };\n    }\n\n    var getCurrentState = () => {\n      if (this.state.currentStateName === \"Design\") {\n        return states.DEFAULT;\n      }\n      if (this.state.currentStateName === \"Floorplan\") {\n        return states.FLOORPLAN;\n      }\n      if (this.state.currentStateName === \"Shop\") {\n        return states.SHOP;\n      }\n      return null;\n    };\n\n    var updateState = (newState) => {\n      this.setState({ currentStateName: newState.name });\n    };\n\n    function setCurrentState(newState, firstTime) {\n      currentState = getCurrentState();\n      firstTime = firstTime || false;\n      if (!firstTime && currentState.name === newState.name) {\n        return;\n      }\n\n      // show the right tab as active\n      if (currentState.name !== newState.name) {\n        if (currentState.tab != null) {\n          currentState.tab.removeClass(ACTIVE_CLASS);\n        }\n        if (newState.tab != null) {\n          newState.tab.addClass(ACTIVE_CLASS);\n        }\n      }\n\n      if (currentState.name === newState.name) {\n        newState.tab.addClass(ACTIVE_CLASS);\n      }\n\n      // set item unselected\n      if (firstTime || newState.name !== \"Design\") {\n        blueprint3d.three.getController().setSelectedObject(null);\n      }\n\n      // show and hide the right divs\n      currentState.div.hide();\n      newState.div.show();\n\n      // custom actions\n      if (newState === states.FLOORPLAN) {\n        floorplanControls.handleWindowResize();\n        floorplanControls.updateFloorplanView();\n      }\n\n      if (currentState === states.FLOORPLAN) {\n        blueprint3d.model.floorplan.update();\n      }\n\n      if (newState === states.DEFAULT) {\n        blueprint3d.three.updateWindowSize();\n      }\n\n      // set new state\n      handleWindowResize();\n      currentState = newState;\n      updateState(newState);\n\n      stateChangeCallbacks.fire(newState);\n\n      //change mobx state-active-tab\n    }\n\n    function initLeftMenu() {\n      $(window).resize(handleWindowResize);\n      handleWindowResize();\n    }\n\n    function handleWindowResize() {\n      // $(\".sidebar\").height(window.innerHeight);\n      // $(\"#add-items\").height(window.innerHeight);\n    }\n\n    var initItems = () => {\n      this.initItems(blueprint3d, setCurrentState);\n    };\n\n    init();\n    this.setState({ blueprint3d: blueprint3d });\n  };\n\n  initItems(blueprint3d, setCurrentState) {\n    $(\"#add-items\").find(\".add-item\").off(\"click\");\n    $(\"#add-items\")\n      .find(\".add-item\")\n      .click(function (e) {\n        var modelUrl = $(this).attr(\"model-url\");\n        var itemType = parseInt($(this).attr(\"model-type\"));\n        var metadata = {\n          itemName: $(this).attr(\"model-name\"),\n          resizable: true,\n          modelUrl: modelUrl,\n          itemType: itemType,\n        };\n\n        blueprint3d.model.scene.addItem(itemType, modelUrl, metadata);\n        setCurrentState(\n          {\n            div: $(\"#viewer\"),\n            tab: $(\"#design_tab\"),\n            name: \"Design\",\n          },\n          false\n        );\n      });\n  }\n\n  /*\n   * Change floor and wall textures\n   */\n  textureSelector(blueprint3d, sideMenu) {\n    // var scope = this;\n    var three = blueprint3d.three;\n    // var isAdmin = isAdmin;\n\n    var currentTarget = null;\n\n    function initTextureSelectors() {\n      $(\".texture-select-thumbnail\").off(\"click\");\n      $(\".texture-select-thumbnail\").click(function (e) {\n        var textureUrl = $(this).attr(\"texture-url\");\n        var textureStretch = $(this).attr(\"texture-stretch\") === \"true\";\n        var textureScale = parseInt($(this).attr(\"texture-scale\"));\n        currentTarget.setTexture(textureUrl, textureStretch, textureScale);\n\n        e.preventDefault();\n      });\n    }\n\n    function init() {\n      three.wallClicked.add(wallClicked);\n      three.wallClicked.add(initTextureSelectors);\n      three.floorClicked.add(floorClicked);\n      three.wallClicked.add(initTextureSelectors);\n      three.itemSelectedCallbacks.add(reset);\n      three.wallClicked.add(initTextureSelectors);\n      three.nothingClicked.add(reset);\n      three.wallClicked.add(initTextureSelectors);\n      // sideMenu.stateChangeCallbacks.add(reset);\n      three.wallClicked.add(initTextureSelectors);\n      initTextureSelectors();\n    }\n\n    function wallClicked(halfEdge) {\n      if (currentTarget !== undefined && currentTarget !== null) {\n        currentTarget.removeOutline();\n      }\n      currentTarget = halfEdge;\n      currentTarget.drawOutline();\n      $(\"#floorTexturesDiv\").hide();\n      $(\"texture-context-container\").show();\n      $(\"#wallTextures\").show();\n      initTextureSelectors();\n    }\n\n    function floorClicked(room) {\n      if (currentTarget !== undefined && currentTarget !== null) {\n        currentTarget.removeOutline();\n      }\n      currentTarget = room;\n      currentTarget.drawOutline();\n      $(\"#wallTextures\").hide();\n      $(\"texture-context-container\").show();\n      $(\"#floorTexturesDiv\").show();\n      initTextureSelectors();\n    }\n\n    function reset() {\n      if (currentTarget !== undefined && currentTarget !== null) {\n        currentTarget.removeOutline();\n      }\n      $(\"texture-context-container\").hide();\n      $(\"#wallTextures\").hide();\n      $(\"#floorTexturesDiv\").hide();\n      initTextureSelectors();\n    }\n\n    init();\n  }\n\n  handleLogoutShow(e) {\n    e.preventDefault();\n    this.props.store.cambiarModuloLogout(true);\n  }\n  \n  handleLogoutShow(e) {\n    e.preventDefault();\n    this.props.store.cambiarModuloLogout(true);\n  }\n  \n\n  async engine(viewKey) {\n    /*\n     * Floorplanner controls\n     */\n\n    var ViewerFloorplanner = function (blueprint3d) {\n      var canvasWrapper = \"#floorplanner\";\n\n      // buttons\n      var move = \"#move\";\n      var remove = \"#delete\";\n      var draw = \"#draw\";\n\n      var activeStlye = \"btn-primary disabled\";\n\n      this.floorplanner = blueprint3d.floorplanner;\n\n      var scope = this;\n\n      function init() {\n        $(window).resize(scope.handleWindowResize);\n        scope.handleWindowResize();\n\n        // mode buttons\n        scope.floorplanner.modeResetCallbacks.add(function (mode) {\n          $(draw).removeClass(activeStlye);\n          $(remove).removeClass(activeStlye);\n          $(move).removeClass(activeStlye);\n          if (mode === BP3D.Floorplanner.floorplannerModes.MOVE) {\n            $(move).addClass(activeStlye);\n          } else if (mode === BP3D.Floorplanner.floorplannerModes.DRAW) {\n            $(draw).addClass(activeStlye);\n          } else if (mode === BP3D.Floorplanner.floorplannerModes.DELETE) {\n            $(remove).addClass(activeStlye);\n          }\n\n          if (mode === BP3D.Floorplanner.floorplannerModes.DRAW) {\n            $(\"#draw-walls-hint\").show();\n            scope.handleWindowResize();\n          } else {\n            $(\"#draw-walls-hint\").hide();\n          }\n        });\n\n        $(move).click(function () {\n          scope.floorplanner.setMode(BP3D.Floorplanner.floorplannerModes.MOVE);\n        });\n        // $(move).on(\"touchend\", function () {\n        //   scope.floorplanner.setMode(BP3D.Floorplanner.floorplannerModes.MOVE);\n        // });\n\n        $(draw).click(function () {\n          scope.floorplanner.setMode(BP3D.Floorplanner.floorplannerModes.DRAW);\n        });\n        // $(draw).on(\"touchend\", function () {\n        //   scope.floorplanner.setMode(BP3D.Floorplanner.floorplannerModes.DRAW);\n        // });\n\n        $(remove).click(function () {\n          scope.floorplanner.setMode(\n            BP3D.Floorplanner.floorplannerModes.DELETE\n          );\n        });\n        // $(remove).on(\"touchend\", function () {\n        //   scope.floorplanner.setMode(\n        //     BP3D.Floorplanner.floorplannerModes.DELETE\n        //   );\n        // });\n      }\n\n      this.updateFloorplanView = function () {\n        scope.floorplanner.reset();\n      };\n\n      this.handleWindowResize = function () {\n        $(canvasWrapper).height(\n          window.innerHeight - $(canvasWrapper).offset().top\n        );\n        scope.floorplanner.resizeView();\n      };\n\n      init();\n    };\n\n    var mainControls = function (blueprint3d) {\n      function newDesign() {\n        blueprint3d.model.loadSerialized(NEW_STRUCTURE);\n      }\n\n      // var loadDesign = async (event) => {\n      //   let name = $(\"#loadFile\").attr('name');\n      //   let file1 = await axios.get(\n      //     \"http://localhost:8001/assets/\" + name\n      //   );\n      //   // var file1 = event.target.files[0];\n      //   var reader = new FileReader();\n      //   reader.onload = function () {\n      //     var data = reader.result;\n      //     blueprint3d.model.loadSerialized(data);\n      //   };\n      //   reader.readAsText(file1);\n      //   $(\"#loadFile\").replaceWith($(\"#loadFile\").val(\"\").clone(true));\n\n      //   try {\n      //     let uri = $(\"#loadFile\").attr(\"uri\");\n      //     console.log(\"uri: \" + uri);\n      //     if (uri !== \"\") {\n      //       let res = await axios.get(\"http://localhost:8001/assets/\" + uri);\n      //       blueprint3d.model.loadSerialized(JSON.stringify(res.data));\n      //     }\n      //   } catch (e) {\n      //     console.log(e);\n      //   }\n      // };\n\n      // function saveDesign() {\n      //   var data = blueprint3d.model.exportSerialized();\n      //   var a = window.document.createElement(\"a\");\n      //   var blob = new Blob([data], {\n      //     type: \"text\",\n      //   });\n      //   // setBlob(blob);\n      //   a.href = window.URL.createObjectURL(blob);\n      //   a.download = \"design\";\n      //   document.body.appendChild(a);\n      //   a.click();\n      //   document.body.removeChild(a);\n      // }\n\n      // function setBlob(blob) {\n      //   setNewBlob(blob);\n      // }\n\n      function init() {\n        $(\"#new\").click(newDesign);\n        // $(\"#new\").on(\"touchend\", newDesign);\n\n        // $(\"#loadFile\").click(loadDesign);\n        // $(\"#loadFileLabel\").on(\"touchend\", function () {\n        //   $(\"#loadFile\").trigger(\"click\");\n        // });\n\n        // $(\"#saveFile\").click(saveDesign);\n        // $(\"#saveFile\").on(\"touchend\", saveDesign);\n      }\n\n      init();\n    };\n\n    /*\n     * Initialize!\n     */\n\n    var modalEffects = this.modalEffects(this.state.blueprint3d);\n    var viewerFloorplanner = new ViewerFloorplanner(this.state.blueprint3d);\n    // eslint-disable-next-line no-unused-vars\n    var contextMenu = this.contextMenu(this.state.blueprint3d);\n    var sideMenu = this.sideMenu(\n      this.state.blueprint3d,\n      viewerFloorplanner,\n      modalEffects\n    );\n\n    // eslint-disable-next-line no-unused-vars\n    var textureSelector = this.textureSelector(\n      this.state.blueprint3d,\n      sideMenu\n    );\n    // eslint-disable-next-line no-unused-vars\n    var cameraButtons = this.cameraButtons(this.state.blueprint3d);\n    mainControls(this.state.blueprint3d);\n\n    // This serialization format needs work\n    // Load a simple rectangle room\n    if (viewKey === \"\") {\n      this.state.blueprint3d.model.loadSerialized(INIT_STRUCTURE);\n    } else {\n      try {\n        let res = await axios.get(BASE_URL + ASSETS + viewKey);\n        // let file1 = new Blob(res)\n        // var blueprint3d = this.state.blueprint3d;\n        // var reader = new FileReader();\n        //   reader.onload = function () {\n        //     var data = reader.result;\n        //     blueprint3d.model.loadSerialized(data);\n        //   };\n        //   reader.readAsText(file1);\n        this.state.blueprint3d.model.loadSerialized(JSON.stringify(res.data));\n      } catch (e) {\n        console.log(e);\n        this.state.blueprint3d.model.loadSerialized(INIT_STRUCTURE);\n      }\n    }\n  }\n\n  componentDidMount() {\n    // const { store } = this.props;\n    var opts = {\n      floorplannerElement: \"floorplanner-canvas\",\n      threeElement: \"#viewer\",\n      threeCanvasElement: \"three-canvas\",\n      textureDir: \"rooms/textures/\",\n      widget: false,\n    };\n    this.setState({ blueprint3d: new BP3D.Blueprint3d(opts) }, () => {\n      if (\n        this.props.viewKey !== undefined &&\n        this.props.viewKey !== null &&\n        this.props.viewKey !== \"\"\n      ) {\n        this.engine(this.props.viewKey);\n      } else {\n        this.engine(\"\");\n      }\n    });\n  }\n\n  setDesignState(newState, firstTime) {\n    firstTime = firstTime || false;\n    var ACTIVE_CLASS = \"active\";\n\n    $(\"#items_tab\").removeClass(ACTIVE_CLASS);\n    $(\"#design_tab\").addClass(ACTIVE_CLASS);\n\n    // show and hide the right divs\n    $(\"#add-items\").hide();\n    $(\"#viewer\").show();\n\n    this.state.blueprint3d.three.updateWindowSize();\n\n    // set new state\n    function handleWindowResize() {\n      // $(\".sidebar\").height(window.innerHeight);\n      // $(\"#add-items\").height(window.innerHeight);\n    }\n    handleWindowResize();\n\n    function reset() {\n      $(\"texture-context-container\").hide();\n      $(\"#wallTextures\").hide();\n      $(\"#floorTexturesDiv\").hide();\n    }\n\n    reset();\n    this.setState({ currentStateName: \"Design\" });\n\n    //change mobx state-active-tab\n  }\n\n  componentDidUpdate(prevProps, prevState, snapShot) {\n    if (this.props.añadirManejadorDeClick) {\n      // this.setState({ añadirManejadorDeClick: true });\n      this.props.store.cambiarManejadorDeClick(false);\n      this.initItems(this.state.blueprint3d, this.setDesignState);\n    }\n    if (this.props.añadirManejadorDeClick === false && prevProps.añadirManejadorDeClick) {\n      this.setState({ añadirManejadorDeClick: false });\n    }\n  }\n\n  render() {\n    const { store } = this.props;\n    return (\n      <div className=\"horizontal-container\">\n        {/* Left Column */}\n        \n\n        <div id=\"texture-context-container\">\n          {/* Context Menu */}\n          <div id=\"context-menu\">\n            <ContextMenu />\n          </div>\n          {/* Floor Textures */}\n          <div id=\"floorTexturesDiv\" style={{ display: \"none\" }}>\n            <FloorTextureList usuarioHaIniciadoSesion={store.obtenerInicioDeSesion} />\n          </div>\n\n          {/* Wall Textures */}\n          <div id=\"wallTextures\" style={{ display: \"none\" }}>\n            <WallTextureList usuarioHaIniciadoSesion={store.obtenerInicioDeSesion} />\n          </div>\n        </div>\n        {/* End Left Column */}\n\n        {/* Right Column */}\n        <div className=\"right-container\">\n          {/* 3D Viewer */}\n          <div id=\"viewer\">\n            {/* <div id=\"camera-controls\">\n              <Button\n                variant=\"info\"\n                size=\"sm\"\n                id=\"zoom-out\"\n                className={\"basic-button\"}\n              >\n                <FaSearchMinus />\n              </Button>\n              <Button\n                variant=\"info\"\n                size=\"sm\"\n                id=\"reset-view\"\n                className={\"basic-button\"}\n              >\n                <FaHome />\n              </Button>\n              <Button\n                variant=\"info\"\n                size=\"sm\"\n                id=\"zoom-in\"\n                className={\"basic-button\"}\n              >\n                <FaSearchPlus />\n              </Button>\n\n              <Button\n                variant=\"info\"\n                size=\"sm\"\n                id=\"move-left\"\n                className={\"basic-button\"}\n              >\n                <FaArrowLeft />\n              </Button>\n              <div className={\"vertical-controls-container\"}>\n                <Button\n                  variant=\"info\"\n                  size=\"sm\"\n                  id=\"move-up\"\n                  className={\"basic-button\"}\n                >\n                  <FaArrowUp />\n                </Button>\n                <Button\n                  variant=\"info\"\n                  size=\"sm\"\n                  id=\"move-down\"\n                  className={\"basic-button\"}\n                >\n                  <FaArrowDown />\n                </Button>\n              </div>\n              <Button\n                variant=\"info\"\n                size=\"sm\"\n                id=\"move-right\"\n                className={\"basic-button\"}\n              >\n                <FaArrowRight />\n              </Button>\n            </div> */}\n\n            <div id=\"loading-modal\">\n              <h1>Loading...</h1>\n            </div>\n          </div>\n          \n\n          {/*2D Floorplanner */}\n          <div id=\"floorplanner\">\n            <canvas id=\"floorplanner-canvas\"></canvas>\n            <div id=\"floorplanner-controls\">\n              {/* <Button\n                variant=\"secondary\"\n                size=\"sm\"\n                className=\"icon-text-button\"\n                id=\"move\"\n              >\n                <span className=\"icon-centre\">\n                  <FaArrowsAlt />\n                </span>\n                <span className=\"text-centre\">Move Walls</span>\n              </Button>\n              <Button\n                variant=\"secondary\"\n                size=\"sm\"\n                className=\"icon-text-button\"\n                id=\"draw\"\n              >\n                <span className=\"icon-centre\">\n                  <FaPencilAlt />\n                </span>\n                <span className=\"text-centre\">Draw Walls</span>\n              </Button>\n              <Button\n                variant=\"secondary\"\n                size=\"sm\"\n                className=\"icon-text-button\"\n                id=\"delete\"\n              >\n                <span className=\"icon-centre\">\n                  <FaTrashAlt />\n                </span>\n                <span className=\"text-centre\">Delete Walls</span>\n              </Button> */}\n\n              <Button\n                variant=\"info\"\n                size=\"sm\"\n                className=\"icon-text-button\"\n                id=\"update-floorplan\"\n              >\n                <span className=\"text-centre\">Listo</span>\n                <span className=\"icon-centre\">\n                  <FaChevronRight />\n                </span>\n              </Button>\n            </div>\n            <div id=\"draw-walls-hint\">\n              Press the \"Esc\" key to stop drawing walls\n            </div>\n          </div>\n          {/* Add Items */}\n          <div id=\"add-items\">\n            <Tabs\n              variant=\"pills\"\n              style={{ display: 'flex', flexDirection: 'column', width: '100px', position: 'absolute', right: '100px', top: '100px'}}\n              id=\"controlled-tab-example\"\n              activeKey={this.state.key}\n              onSelect={(k) => {\n                this.setState({ key: k });\n              }}\n            >\n              {/* <Tab eventKey=\"sofa\" title=\"Sofas\">\n                <CardListSofa usuarioHaIniciadoSesion={store.obtenerInicioDeSesion} />\n              </Tab> */}\n              <Tab eventKey=\"chair\" title=\"Sillas\">\n                <CardListChair usuarioHaIniciadoSesion={store.obtenerInicioDeSesion} />\n              </Tab>\n              <Tab eventKey=\"rug\" title=\"Alfombras\">\n                <CardListRug usuarioHaIniciadoSesion={store.obtenerInicioDeSesion} />\n              </Tab>\n              <Tab eventKey=\"misc\" title=\"Miscelaneos\">\n                <CardListMisc usuarioHaIniciadoSesion={store.obtenerInicioDeSesion} />\n              </Tab>\n              <Tab eventKey=\"light\" title=\"Luces\">\n                <CardListLight usuarioHaIniciadoSesion={store.obtenerInicioDeSesion} />\n              </Tab>\n              {/* <Tab eventKey=\"kitchen\" title=\"Kitchen\">\n                <CardListKitchen usuarioHaIniciadoSesion={store.obtenerInicioDeSesion} />\n              </Tab>\n              <Tab eventKey=\"arch\" title=\"Architectural\">\n                <CardListArch usuarioHaIniciadoSesion={store.obtenerInicioDeSesion} />\n              </Tab> */}\n            </Tabs>\n          </div>\n          <div className=\"menu\">\n            <div display=\"flex\">\n              <ul className=\"nav nav-sidebar\">\n                <li id=\"design_tab\">\n                  <OverlayTrigger\n                    placement=\"right\"\n                    overlay={<Tooltip>Diseñar</Tooltip>}\n                  >\n                    <div className=\"icons\">\n                      <div className=\"iconWrapper\">\n                        <FaCube size='25px' />\n                      </div>\n                    </div>\n                  </OverlayTrigger>\n                </li>\n                <li id=\"floorplan_tab\">\n                  <OverlayTrigger\n                    placement=\"right\"\n                    overlay={<Tooltip>Editar piso</Tooltip>}\n                  >\n                    <div className=\"icons\">\n                      <div className=\"iconWrapper\">\n                        <FaPenFancy size='25px' />\n                      </div>\n                    </div>\n                  </OverlayTrigger>\n                </li>\n                <li id=\"items_tab\">\n                  <OverlayTrigger\n                    placement=\"right\"\n                    overlay={<Tooltip>Añadir objeto</Tooltip>}\n                  >\n                    <div className=\"icons\">\n                      <div className=\"iconWrapper\">\n                        <FaPlus size='25px' />\n                      </div>\n                    </div>\n                  </OverlayTrigger>\n                </li>\n                <li id=\"items_tab\">\n                  <img src=\"./logo.png\" className=\"top-bar-logo\" alt=\"\" style={{ width: '50px', height: '50px', margin: '15px 10px 0 10px' }} />\n                </li>\n                <li>\n                  <OverlayTrigger\n                    placement=\"right\"\n                    overlay={<Tooltip>Nuevo plano</Tooltip>}\n                    onClick={() => this.store.cambiarModuloRepetir(true)}\n                  >\n                    <div className=\"icons\" id='new'>\n                      <div className=\"iconWrapper\">\n                        <FaRedo size='25px' />\n                      </div>\n                    </div>\n                  </OverlayTrigger>\n                </li>\n                 <li id=\"design_tab\">\n                  <OverlayTrigger\n                    placement=\"right\"\n                    overlay={<Tooltip>Capturar</Tooltip>}\n                  >\n                    <div className=\"icons\">\n                      <div className=\"iconWrapper\">\n                        <FaCamera size='25px' />\n                      </div>\n                    </div>\n                  </OverlayTrigger>\n                </li>\n                <li>\n                  <Button\n                    variant=\"outline-dark\"\n                    className=\"top-bar-login-button\"\n                    style={{ position: 'absolute', top: '10px', right: 0}}\n                    onClick={this.handleLogoutShow}\n                  >\n                    Salir\n                  </Button>\n                </li>\n              </ul>\n            </div>\n          </div>\n        </div>\n        {/* End Right Column */}\n      </div>\n    );\n  }\n}\n\nexport default BlueprintPage;\n"]},"metadata":{},"sourceType":"module"}